g f tm graphic interchange format tm standard defining mechanism storage transmission rasterbased graphic information june c compuserve incorporated right reserved document copyrighted information contained within made available use computer software without royalty licensing restriction gif graphic interchange format trademark compuserve incorporated h r block company arlington centre blvd columbus ohio  page graphic interchange format gif specification table content introduction page general file format page gif signature page screen descriptor page global color map page image descriptor page local color map page raster data page gif terminator page gif extension block page appendix glossary page appendix b interactive sequence page appendix c image packaging compression page appendix multiple image processing page graphic interchange format gif page specification introduction gif tm compuserve standard defining generalized color raster image graphic interchange format tm allows highquality highresolution graphic displayed variety graphic hardware intended exchange display mechanism graphic image image format described document designed support current future image technology addition serve basis future compuserve graphic product main focus document provide technical information necessary programmer implement gif encoders decoder assumption made terminology relavent graphic programming general first section document describes gif data format component applies gif decoder either standalone program part communication package appendix b section relavent decoder part communication software package describes protocol requirement entering exiting gif mode responding host interrogation glossary appendix defines terminology used document appendix c give detailed explanation graphic image packaged series data byte graphic interchange format data definition general file format                       gif signature                     screen descriptor                     global color map                       image descriptor                     local color map  repeated n time                     raster data              gif terminator              graphic interchange format gif page specification gif signature following gif signature identifies data following valid gif image stream consists following six character g f last three character may viewed version number particular gif definition used general reference document regarding gif address version dependency screen descriptor screen descriptor describes overall parameter gif image following defines overall dimension image space logical screen required existance color mapping information background screen color color depth information information stored series bit byte described bit byte         screen width  raster width pixel lsb first         screen height raster height pixel lsb first        global color map follows descriptor cr pixel cr bit color resolution        pixel bitspixel image background backgroundcolor index screen background         color defined global color   map default map none specified         logical screen width height larger physical display image larger physical display handled implementation dependent take advantage hardware characteristic eg macintosh scrolling window otherwise image clipped edge display value pixel also defines maximum number color within image range value pixel represents bit translates range b w color bit word reserved future definition must zero graphic interchange format gif page specification global color map global color map optional recommended image accurate color rendition desired existence color map indicated field byte screen descriptor color map also associated image gif file described later however global map normally used hardware restriction equipment available today individual image descriptor flag normally zero global color map present definition immediately follows screen descriptor number color map entry following screen descriptor equal  bit per pixel entry consists three byte value representing relative intensity red green blue respectively structure color map block bit byte         red intensity red value color index         green intensity green value color index         blue intensity blue value color index         red intensity red value color index         green intensity green value color index         blue intensity blue value color index         continues remaining color image pixel value received displayed according closest match available color display based color map color component represent fractional intensity value none full white would represented  black  medium yellow  display device support fewer bit per color component higher order bit component used creation gif color map entry hardware supporting fewer bit per component component value hardware converted bit format following calculation mapvalue componentvalue   nbits  assures accurate translation color display case creating gif image hardware without color palette capability fixed palette created based available display color hardware global color map indicated default color map generated internally map possible incoming color index hardware color index modulo n n number available hardware color graphic interchange format gif page specification image descriptor image descriptor defines actual placement extent following image within space defined screen descriptor also defined flag indicate presence local color lookup map define pixel display sequence image descriptor introduced image separator character role image separator simply provide synchronization character introduce image descriptor desirable gif file happens contain one image character defined xc hex comma character encountered image image descriptor follow immediately character encountered end previous image image separator character ignored allows future gif enhancement present newer image format yet ignored safely older software decoder bit byte           image separator character         start image pixel  image left  left side screen lsb first          image top  start image pixel top screen lsb first          image width  width image pixel lsb first          image height height image pixel lsb first     use global color map ignore pixel mipixel local color map follows use pixel     image formatted sequential order image formatted interlaced order pixel bit per pixel image specification image position size must confined dimension defined screen descriptor hand necessary image fill entire screen defined local color map graphic interchange format gif page specification local color map optional defined future use bit byte image descriptor set color map follows image descriptor applies following image end image color map revert defined screen descriptor note pixel field byte image descriptor used local color map indicated defines parameter image pixel size determines number color map entry follow bit per pixel value also revert value specified screen descriptor processing image complete raster data format actual image defined series pixel color index value make image pixel stored left right sequentially image row default image row written sequentially top bottom case interlace bit set byte image descriptor row order image display follows fourpass process image filled widely spaced row first pas writes every th row starting top row image window second pas writes every th row starting fifth row top third pas writes every th row starting third row top fourth pas completes image writing every row starting second row top graphic description process follows image row pas pas pas pas result                          b b c c b b b b e e c c f f b b image pixel value processed series color index map existing color map resulting color value map actually displayed series pixel index number equal imagewidthimageheight pixel passed gif image data stream one value per pixel compressed packaged according version lzw compression algorithm defined appendix c graphic interchange format gif page specification gif terminator order provide synchronization termination gif image file gif decoder process end gif mode character xb hex found image processed convention decoding software pause wait action indicating user ready continue may carriage return entered keyboard mouse click interactive application user action must passed host carriage return character host application continue decoding software typically leave graphic mode resume previous process gif extension block provide orderly extension gif definition mechanism defining packaging extension within gif data stream necessary specific gif extension defined documented compuserve order provide controlled enhancement path gif extension block packaged manner similar used raster data though compressed basic structure byte           gif extension block introducer         function code extension function code           byte count          repeated many time necessary func data byte                     zero byte count terminates block         gif extension block may immediately preceed image descriptor occur gif terminator gif decoder must able recognize existence gif extension block read past unable process function code ensures older decoder able process extended gif image file future though without additional functionality graphic interchange format gif page appendix glossary glossary pixel smallest picture element graphic image usually corresponds single dot graphic screen image resolution typically given unit pixel example fairly standard graphic screen format one pixel across pixel high pixel appear one several color depending capability graphic hardware raster horizontal row pixel representing one line image typical method working image since hardware oriented work efficiently manner lsb least significant byte refers convention two byte numeric value le significant byte value preceeds significant byte convention typical many microcomputer color map list definition color used gif image desired color converted available color table derived assigning incoming color index image output color index hardware color map definitons specified gif image output pixel color vary based hardware used ability match defined color interlace method displaying gif image multiple pass made outputting raster line spaced apart provide way visualizing general content entire image data processed b protocol compuservedeveloped errorcorrecting file transfer protocol available public domain implemented compuserve vidtex product error checking mechanism used transfer gif image interactive application lzw sophisticated data compression algorithm based work done lempelziv welch feature efficient onepass encoding decoding allows image decompressed displayed time original article technique adapted terry welch  technique high performance data compression  ieee computer vol june basic algorithm also used public domain arc file compression utility compuserve adaptation lzw gif described appendix c graphic interchange format gif page appendix b interactive sequence gif sequence exchange interactive environment following sequence defined use mediating control gif sender gif receiver interactive communication line sequence apply application involve downloading static gif file considered part gif file gif capability enquiry gce sequence issued host request interactive gif decoder return response message defines graphic parameter decoder involves returning information available screen size number bitscolor supported amount color detail supported escape sequence gce defined esc g g lower case space inserted clarity xb xb xe x x gif capability response gif capability response message returned interactive gif decoder defines decoder display capability graphic mode supported software note also include graphic printer well monitor screen general format message version protocol dev width height colorbits colorres  cr gcr identifier character number sign version gif format version number initially protocol endtoend protocol supported decoder transfer direct bit data stream protocol use error correction protocol transfer gif data interactively host directly display dev screen parameter set follows dev printer parameter set follows width maximum supported display width pixel height maximum supported display height pixel colorbits number bit per pixel supported number supported color therefore colorbits colorres number bit per color component supported hardware color palette colorres hardware palette table available note value gcr returned ascii decimal number message terminated carriage return character graphic interchange format gif page appendix b interactive sequence following gcr message describes three standard ega configuration printer gif data stream processed within error correcting protocol    cr enter gif graphic mode two sequence currently defined invoke interactive gif decoder action difference different output medium selected sequence esc g display gif image screen xb xb xe x x esc g display image directly attached graphic printer image may optionally displayed screen well xb xb xe x x note g character terminating sequence lower case interactive environment assumed environment transmission gif image data interactive application full bit data stream host micro character code must transferrable establishing bit data path communication normally taken care host application program however receiving communication program supporting gif able receive pas bit code gif decoder software graphic interchange format gif page appendix c image packaging compression raster data stream represents actual output image represented         code size           blok byte count          repeated many time necessary data byte                     zero byte count terminates data stream         conversion image series pixel value transmitted stored character stream involves several step brief step establish code size define number bit needed represent actual data compress data compress series image pixel series compression code build series byte take set compression code convert string bit byte package byte package set byte block preceeded character count output establish code size first byte gif raster data stream value indicating minimum number bit required represent set actual pixel value normally number color bit algorithmic constraint however black white image one color bit must indicated code size code size value also implies compression code must start one bit longer compression lzw algorithm convert series data value series code may raw value code designating series value using text character analogy output code consists character code representing string character graphic interchange format gif page appendix c image packaging compression lzw algorithm used gif match algorithmically standard lzw algorithm following difference special clear code defined reset compressiondecompression parameter table startup state value code  code size example code size indicated image bitspixel clear code value would binary clear code appear point image data stream therefore requires lzw algorithm process succeeding code new data stream starting encoders output clear code first code image data stream end information code defined explicitly indicates end image data stream lzw processing terminates code encountered must last code output encoder image value code clear code  first available compression code value clear code  output code variable length starting code size  bit per code bit per code defines maximum code value hex fff whenever lzw code value would exceed current code length code length increased one packingunpacking code must altered reflect new code length build bit byte lzw compression used gif creates series variable length code bit code must reformed series bit byte character actually stored transmitted provides additional compression image code formed stream bit packed right left picked bit time output assuming character array bit per character using bit code packed example layout would similar byte n byte byte byte byte byte                           hhhhhgggggfffffeeeeedddddcccccbbbbbaaaaa                           note physical packing arrangement change number bit per compression code change concept remains package byte byte created grouped block output preceeding block byte character count byte block zero byte count terminates raster data stream given image block actually output graphic interchange format gif page appendix c image packaging compression gif image block format side effect allowing decoding program ability read past actual image data necessary reading block count skipping data graphic interchange format gif page appendix multiple image processing since gif data stream contain multiple image necessary describe processing display file image descriptor allows placement image within logical screen possible define sequence image may partial screen total fill entire screen guideline handling multiple image situation pause image processed immediately seen decoder image explicitly overwrites image already screen inside window screen clear beginning end gif image process see discussion gif terminator  