lwxm tm litecomm tm windowed xmodem engine datalight turbo c content introducing lwxm difference xmodem wxmodem protocol fundamental transmission block intercomputer dialog wlxm engine overview major engine component note warning modification parity data bit internal timer function buffer size restriction xonxoff control useraccessable data programmer reference enginerelated function lwxrrec lwxtrec lwxm tm litecomm tm windowed xmodem engine datalight turbo c difference xmodem wxmodem intended strict tutorial either xmodem windowed xmodem wxmodem assume already read digested understood documentataion provided lxm xmodem engine reading begin xmodem protocol popular defacto standard builtin deficiency least one addressed variant block checking used original protocol deficiency also exist chief among deficiency amount time required turn around transmission line block sent permit receiver acknowledge successful receipt block turnaround time complicated relatively short block length result number time turnaround occurs transferring file substantial size second area concern study communication protocol relative ease xmodem loose synchronism sender receiver permitting protocol fooled several approach developed within xmodem framework address problem must viewed workaround really correct problem rather mask symptom problem finally xmodem perform well certain packetbased network telenet largely result network speed use xonxoff flow control xmodem implimentations included respond well sender perceives spurious character line xon xoff case xmodem function others may needle retransmission block way xon xoff handled copyright c information technology ltd introducing lwxm page lwxm tm litecomm tm windowed xmodem engine datalight turbo c protocol fundamental transmission block wxmodem transmission block closely mirror xmodem standard several important distinction improve ability wxmodem handle false block false end transmission eot additional character added block syn successfully recognize begiining block receiving program must successfully get one syn character followed traditional soh used xmodem addition synchronizing character help completely eliminate possibility receiver sender fooled resulting aborted transmission premature end file condition help correct problem wxmodem requires character block might cause confusion escaped wxmodem us technique long popular area synchronous communication called transparency using approach certain data character might cause confusion appear data block altered sent special way recognized easily receiver wxmodem character syn xon xoff dle send character part data including block check wxmodem requires character preceeded dle value x added actual character sender receiver recognizes leading dle remove data stream subtracts x character follows problem eot confusion addressed requirement two consectutive eot received recognized true end file condition perhaps unique design element wxmodem way address line turnaround delay discussed earlier wxmodem require transmitted block acknowledged immediately rather sender continue transmit data upto block copyright c information technology ltd introducing lwxm page lwxm tm litecomm tm windowed xmodem engine datalight turbo c sent sender stop wait acknowledgment receiver required acknowledge block individually last block successfully received although wxmodem description fact suggests block acknowledged explicitly effect sender pause briefly block starting send duration pause long enough determine whether incoming acknowledgment handled timeout interval xmodem window close ie sender sent unacknowledged block intercomputer dialog rather reinvent wheel included copy wxmodem description developed peter boswell document file wxmodemdoc wish information subject copyright c information technology ltd wlxm engine page lwxm tm litecomm tm windowed xmodem engine datalight turbo c overview design wlxm engine closely mirror original lxm engine giving capability flexibility use communication protocol indeed wlxm engine employ many kernel routine used lxm engine lxm virtually application access xmodem enhancement without religated simply transferring file copyright c information technology ltd wlxm engine page lwxm tm litecomm tm windowed xmodem engine datalight turbo c major engine component wlxm engine consists primarily two function lwxrrec lwxtrec receive record transmit record respectively lxm two function understand wxmodem internally due nature protocol unlike xmodem share responsibility proper operation host program yet provide per cent required housekeeping lwxrrec function receives one record companion system host program merely handle ever way appropriate block data received optionally monitor flow data companion system lwxrrec assumes responsibilty synchronizing companion system correctly maintaining flow information including correct handing windowing information integral pat protocol unlike companion function lxm however little latitude available host program term selecting operating parameter eg block checking method parameter generally defined protocol alterred lwxtrec performs like fashion host program want send one record host program present record transmited lwxtrec rest lwxtrec module assumes responsibility establishing synchronization receiving computer due nature windowing protocol unlike xmodem host program must also respond retransmission request resetting resend many four previously transmitted block look sample program show one possible approach meeting requirement lwxtrec also terminates transmisssion told host program permit host optionally monitor data flow copyright c information technology ltd wlxm engine page lwxm tm litecomm tm windowed xmodem engine datalight turbo c note warning modification lwxm engine closely integrated litecomm toolbox every likelyhood engine modified function similar package information technology ltd support lwxm engine used either litecomm toolbox parity data bit wxmodem protocol bit protocol say neither recognizes tolerates parity checking ie data bit plus specified parity since lwxm engine determine current setting parity number data bit responsibility controlling setting rest host program using either key function lwxrrec lwxtrec host program must insure setting parity data bit using commsetup function upon final termination function host program must reset value original setting necessary internal timer function lwxrrec lwxtrec employ hardwarebased timing function connects directly normal realtime clock vector xc turbo c version function also establishes special routine using atexit function insure vector reestablished original setting program termination occurs true copyright c information technology ltd wlxm engine page lwxm tm litecomm tm windowed xmodem engine datalight turbo c datalight version however datalight library present like atexit every effort made datalight user insure vector properly reset plan may tharwted abornal termination host program resulting subsequent system crash safest method datalight user employ would use lcclrclock function host program termination alternate approach datalight user may want investigate steve library designed datalight c user excellent library equivalent function turbo atexit buffer size restriction litecomm toolbox permit great deal freedom tailoring communication handler meet specific requirement must caution however using lwxm engine minimum buffer size required commopn function adequate support lwxm particularly transmitting record either low baud rate new generation highspeed mhz processor use lwxm engine transmit buffer must set minimum byte avoid buffer overflow theoretical minimum size supportable practice urge set transmit buffer size byte avoid possibility overflow xonxoff control host program employ xonxoff function litecomm special action required use lwxm windowed xmodem protocol lwxm tolerant xonxoff usage copyright c information technology ltd wlxm engine page lwxm tm litecomm tm windowed xmodem engine datalight turbo c useraccessable data within lwxm certain variable defined globally available host program may examine content variable time determine current state lwxm engine correct definition variable contained litexmh except noted host program must alter content variable abortflag variable group may altered host program flag checked periodically engine function abortflag value function progress cancelled automatically sending instruction companion system see wscec sample program example flag may set rec variable contains current record block number processed event uncorrectable error rec would contain number expected block case successful transmission reception rec number block sent received value contained variable reduced modulo provides block number required wxmodem protocol must never disturbed copyright c information technology ltd programmer reference page lwxm tm litecomm tm windowed xmodem engine datalight turbo c enginerelated function following page document lwxm engine function currently implimented follow style content documentation litecomm toolbox use following page addendum litecomm documentation copyright c information technology ltd programmer reference page lwxm tm litecomm tm windowed xmodem engine datalight turbo c                     function lwxrrec                     summary include litexmh include litecommh int lwxrrec port buff unsigned port unsigned char buff description receive byte record companion system necessary establish synchroniztion companion system port parameter used throughout litecomm toolbox buff pointer byte record record character received area area small lwxm overwrite adjacent data without warning example see accompanying program wsce example lwxrrec usage return value lwxrrec may return several value defined litexmh file return value cause host program respond specific way success record successfully received buff area host program process record call lwxrrec retries maximum number attempt receive copyright c information technology ltd programmer reference page lwxm tm litecomm tm windowed xmodem engine datalight turbo c single record exceeded lwxrrec automatically cancel session host program handle appropriate manner eg issue error message err  lwxrrec detected host program requested cancellation transmission abortflag setting see fatal record sequence occurred eg block number skipped lwxrrec automatically cancel session sending program requested cancellation host program handle fashion similar retries eot sending program data transmit lwxrrec acknowledges eot message automatically host program handle like end offile condition tout lwxrrec failed establish synchronization sending program waiting receive syn soh character combination start block session automatically cancelled dupseq block received duplicate preceeding block host program ignore data contained within block call lwxrrec proceed data transfer copyright c information technology ltd programmer reference page lwxm tm litecomm tm windowed xmodem engine datalight turbo c                     function lwxtrec                     summary include litexmh include litecommh int lwxtrec port buff nrec unsigned port unsigned char buff int nrec description transmit byte record companion system necessary establish synchroniztion companion system transmitting port parameter used throughout litecomm toolbox buff pointer byte record sent companion system typical nullterminated string usually found c byte starting pointer transmitted responsibility host program provide padding might required satisfy byte requirement nrec pointer integer used lwxtrec communicate special requirement host program lwxtrec return value success nrec significant host program indicated end file calling lwxtrec nrec set value  case returned value  indicates endoffile acknowledged companion system lwxtrec return value resend nrec contain block number byte block retransmission started responsibility host program reposition whatever mean appropriate permit retransmission occur copyright c information technology ltd programmer reference page lwxm tm litecomm tm windowed xmodem engine datalight turbo c indicated see wsce one possible approach due special nature nrec initialized value zero first call lwxtrec host program may examine must never modify content nrec example see accompanying program wsce example lwxtrec usage return value lwxtrec may return several value defined litexmh file return value cause host program respond specific way success record successfully sent buff area host program either call lwxtrec next record transmit nrec set value  indicate end transmisson companion system retries maximum number attempt send single record exceeded lwxtrec automatically cancel session host program handle appropriate manner eg issue error message resend companion system requested portion window resent nrec variable contains block number transmission commence err  lwxtrec detected host program requested cancellation transmission abortflag setting see receiving program requested cancellation host program handle fashion similar retries copyright c information technology ltd programmer reference page  