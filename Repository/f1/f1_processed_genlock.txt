genlock circuit operation description                              enhancement one feature space allow ability software control pixel switch disable done mechanical switch pixel switch disable allows user completely ignore background video yet amiga computer genlocked eliminates problem software written genlock mind would add  cost good control bit would encoded vertical interval audio onoff presently done eight sixteen function bit could controlled ability board chroma key  since signal rgb format would easy selectively insert video based color level additional circuitry would add would fit existing case  circuit description purpose genlock peripheral synchronize video output amiga computer another video source camera broadcast vcr circuitry inside peripheral allows overlay computer graphic whatever video source connected also provided facility stereo mixing computer source audio input genlock peripheral composite source analog rgb computer video output video form composite analog rgb highresolution viewing rgb monitor also output master  mhz computer clock h v video reset required synchronize computer graphic device power device derived computer    volt dc rail circuitry peripheral divided several main function regenerating horizontal vertical component original composite source video phase locking mhz clock input video horizontal timing combining source computer video mixing source computer audio encoding rgb overlayed video ntsc pal regenerating horizontal vertical timing source composite video enter j transistor q q form feedback amplifier gain simple sync tip clamping provided cr whose clamp voltage set cr net effect clamp sync tip around volt comparator u strip sync clamped composite video pin comparator trip point set resistive divider r r amplitude point sync output u pin composite sync ttl level oneshot u digital integrator designed detect video drop line output detector force crystal mode operation q enables power crystal oscillator selects computer composite sync j insure stable monitor picture nand gate u form sync selector logic composite sync output selector u decoded horizontal vertical component time constant differentiator cr oneshot u chosen trigger horizontal component sync output u pin series pulse horizontal rate oneshot u form negative going pulse  microsecond wide buffered u monitor requiring seperate horizontal sync j time constant integrator rr c oneshot u chosen trigger vertical component composite sync output u pin pulse microsecond wide line every vertical interval oneshot u generates negative pulse microsecond wide buffered u monitor requiring seperate vertical sync j graphic device amiga computer require reset every vertical interval genlock mode duald flip flop u performs task basically wired divide horizontal sync clocking first stage cause v reset pulse synchronous horizontal one line wide retiming edge v reset buffered r time amiga computer output vertical pulse j ie genlock mode selected peripheral attached sandcastle generator made u u q q circuitry generates multilevel pulse encoding burst blanking timing information u chroma decoder oneshot u time constant chosen generate blanking portion sandcastle pulse oneshot u time constant chosen generate burst timing transistor pair q q form low impedance wideband inverting summing amplifier r supply dc offset give correct dc level q collector u r r sum blanking burst signal respectively gain signal amplifier set ratio input series resistor r r r feedback resistor r sandcastle pulse q collector encodes blanking information v dc burst timing v dc pulse looking much like name implies h reset generated u u input oneshot u regenerated horizontal mhz phaselocked loop u time constant microsecond making square wave horizontal rate pin dual dtype flip flop u wired gated divide h reset output j negative going pulse microsecond wide edge retimed amiga computer color clock j retiming color clock required guard metaphysical state amiga graphical device mhz phase locked loop circuitry generate  mhz clock comprised voltage controlledcrystal oscillator phase detector divider classic phaselocked loop vco unique feature genlock peripheral must generate stable master clock allowed vary percent genlock mode video peripheral input crystal stability required realtime clock counter complicate thing amiga computer tolerate large timing variation switching genlock mode missing clock cycle catastrophic therefore circuit designed crystal oscillator  tickle  voltage controlled oscillator completely synchronous mode switching q associated circuitry mhz colpitts crystal oscillator q buffer prevent loading q power q q controlled q supplying current input video xtal mode required q associated component form colpitts voltage controlled oscillator frequency changed varying dc control voltage cr varactor diode c varies vco center frequency connection made c r allows crystal oscillator  tickle  vco indepth discussion oscillator consult  crystal oscillator circuit  robert j matthys q buffer mhz clock amiga j setting correct ttl level r r l c filter mhz reduce rfi synchronous divide formed u u u u u u schottky device frequency involved operation circuit straightforward output u pin stream pulse horizontal rate called regenerated horizontal never interrupted amiga requirement signal one input phase detector phase detector used analog sample hold type basically detector work sampling ramp generated one comparison frequency feedback sample pulse derived reference output dc used control vco reference input phase detector horizontal component input video applied oneshot u pin delay u  line potentiometer fine tune horizontal position r u generates short sample pulse nanosecond level shifted q q collector drive sample gate q sample voltage held c feedback input go section u adding  line delay output u used trigger ramp generator formed q q ramp charge time controlled c designed accomodate large timebase error present vcr playback ramp charge time critical pll design steeper ramp mean high gain le lock range slower ramp mean lower gain increase tracking range dc operating point loop determined voltage divider formed r r r chosen give maximum dynamic range error signal c buffered dual opamp u section loop time constant determined r c c r around section u output section drive vco closing control loop combining source computer video amiga computer synchronous source video computer source video combined u alone performs overlay function main function u tda decode composite video red green blue component first source video split apart chrominance luminance network l c r filter chroma passing luminence information u network r l c c pass chroma information u u also internally  mhz pll utilizing luminance chrominance sandcastle pulse frame pulse u internal pll video decoded u also input external analog rgb video computer rgb applied u pin respectively signal determines source computer video ultimately output pixel switch j software generated control line amiga one section gate u used force pixel switch show computer video source video lost video output u dc clamped black level stability following description blue channel blue video exit u pin level divided resistor r r feedback pin completing loop c used hold sampled clamp value see motorola data sheet full detail blue video amplified x transistor feedback pair q q gain set ratio rr r give characteristic line impedance ohm j operation similar green red channel component around u best understood consulting tda data sheet hue control r provided allow user color matching computer source video mixing source computer audio left audio channel mixer described source audio j capacitivly coupled c terminated impedance k electronic switch u cdbe used disable source audio via computer control operates follows control enabledisable source audio encoded vertical horizontal blanking interval pixel switch line software setable amiga computer u sample pixel switch vertical interval using frame pulse latch audio status latched output u pin used control transmission gate u data latched line number horizontal sampling done computer audio enter j passive mixing network r control r combine two source pot r allows user control relative level right left mixing controlled shaft feedback pair q q provide gain x make loss passive mixer c provides bandlimiting khz reduce noise pickup within box audio video ground kept seperate connector j encoding rgb video analog rgb signal encoded ntsc pal single device u motorola number mc ic requires continuous subcarrier composite sync output composite video subcarrier obtained oscillator u coupled c sync come output selector u analog rgb signal v amp u coupled pin  u inside mc resistive matrix multiplier transform rgb encoded chroma signal output pin reduce interference high frequency luminance information chroma bandpass filtered mhz r c c chroma reenters chip pin luminance signal derived via internal matrix rgb input output inverted pin td delay luminance information n making time delay caused chroma path bandpass filter chroma luma summed clamped inside u emerging pin composite video emitter follower q buffer video j color burst also added video inside u external component r c determine burst position pin stable zener derived  volt would like receive hardcopy spec please leave email mailbox tech important please make job easier including word genlock somewhere subject line nt forget leave name address nt leave much table content short discussion possible us diagram show location connector posted next week drawing show genlock box mechanical interface thank randy weiner rweiner commodore technical support following material excerpted preliminary genlock spec please excuse nonobvious typo take week uncross eye thank randy weiner rweiner excerpt amiga genlock peripheral specification connector  female pin   type computer                          pin  mhz clock external clock enable red analog video green analog video blue analog video  connection composite sync h reset v reset ground pixel switch color clock  mhz  ground  ground ground  volt  volt  volt male pin   type monitor                          pin connection connection red analog video green analog video blue analog video  connection composite sync horizontal sync vertical sync ground  connection  ground  ground ground  connection rcatype jack                          composite source video composite video rsource audio lsource audio rcomputer audio lcomputer audio rmixed audio lmixed audio video performance  bandwith composite db luminance mhz analog rgb db mhz chroma q db  mhz locking range horizontal  hz subcarrier  hz  mhz vertical crash lock horizontal phase   microsecond subcarrier phase  degree burst timing vertical reset output line late horizontal reset output coincident input clock jitter n n typ genlock crystal stable video source mhz clock genlock mode phase locked input horizontal timing automatic switch crystal mode occurs line missing source video discontinuity clock cycle occurs audio performance  bandwidth db hz khz flat db gain db dependent mix control setting source audio disabled db setting bit pixel switch line vertical blanking input specification  female pin   type computer                          pin analog red  terminated ohm inut level volt pp nominal level analog green  analog red analog blue  analog red composite sync  ttl level k load negative going pixel switch  ttl level k load low level enables external rgb overlay vertical interval low level pixel switch enables external audio high level disables level valid horizontal vertical blanking color clock  ttl level k load synchronous host computer freq  mhz  volt approx load  volt approx load  volt approx load rca type jack                          composite video  ohm load volt pp  volt sync  db accept block vertical rsource audio  ohm load volt rms nominal lsource audio  rcomputer audio  lcomputer audio  output specification  female pin   type computer                          pin  clock  semisinusoid able drive two schottky ttl load external clock enable  low active direct connect gnd horizontal reset  low active l driver low microsecond beginning horizontal line vertical reset  low active l driver occurs line microsecond wide male pin   type monitor                          pin red analog video ohm impedance drive volt pp ohm load green analog video pin blue analog video pin composite sync  low active l driver horizontal sync  low active l driver  microsecond wide vertical sync  low active l driver horizontal line wide rca jack                          composite video ohm impedance volt pp ohm load  volt sync rmixed audio  ohm impedance volt rms ohm lmixed audio  