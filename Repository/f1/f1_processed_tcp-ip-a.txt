introduction administration internetbased local network c r c computer science facility group c l rutgers state university new jersey center computer information service laboratory computer science research october introduction people intend set administer network based internet networking protocol tcpip copyright c charles l hedrick anyone may reproduce document whole part provided copy republication entire document must show rutgers university source must include notice use material must reference manual rutgers university fact material copyright charles hedrick used permission unix trademark technology inc table content problem  comment terminology routing addressing choosing addressing structure  subdivide address space  subnets v multiple network number  allocate subnet network number  dealing multiple  virtual  subnets one network  dealing multiple subnets turning subnetting  multiple subnets implication broadcasting  choosing address class  dialup ip micro gateway dynamically assigned address  dialup ip  micro gateway networkwide service naming setting routing individual computer  datagrams routed  fixed route  routing redirects  way host find route  spying routing  proxy arp  moving new route failure bridge gateway  alternative design  mesh point point line  circuit switching technology  singlelevel network  mixed design  introduction alternative switching technology  repeater  bridge gateway  bridge  gateway  comparing switching technology  isolation  performance  routing  network management  final evaluation configuring gateway  configuring routing gateway document intended help people planning set new network based internet protocol administer existing one assumes basic familiarity tcpip protocol particularly structure internet address companion paper  introduction internet protocol  may provide convenient introduction document attempt replace technical documentation specific tcpip implementation rather attempt give overall background specific particular implementation directed specifically network  medium  complexity probably appropriate network involving several dozen building planning manage larger network need preparation get reading document number case command output berkeley unix shown computer system command similar function seemed useful give actual example limit general talk even actual output see slightly different problem document emphasize primarily  logical  network architecture many document article trade press discus actual network medium ethernet token ring etc generally made clear article choice network medium generally critical overall design network done network generally determined network protocol supported quality implementation practice medium normally chosen based purely pragmatic ground medium supported particular type computer connect distance go logistics installing various kind cable generally mean ethernet used mediumscale system ethernet network based twistedpair wiring micro network specialized highspeed network typically token ring campuswide backbone local network involving supercomputer highperformance application thus document assumes chosen installed individual network ethernet token ring vendor helped connect computer network faced interrelated problem configuring software computer finding way connect individual ethernet token ring etc form single coherent network connecting network outside world primary thesis document decision require bit advance thought fact network need  architecture  consists way assigning address way routing various choice host interact network decision need made entire network preferably first installed  comment terminology going use term  ip  throughout document refer network designed carry tcpip ip networklevel protocol internet tcpip family protocol thus common practice use term  ip  referring address routing networklayer item fact distinction always clear practice term internet tcpip ip may appear almost interchangeable term  packet   datagram  also almost interchangeable ideally  packet  used lowestlevel physical unit whereas  datagram  refers unit data level ip however identical medium people nearly stopped making distinction tried use term correctly even though day may sound bit pedantic term  packet  seems winning common speech example gateway speed generally given  packet per second  used technically accurate  datagrams per second  since really datagrams counted use term  gateway  author use  router   gateway  original internet term unfortunately iso community begun using word rather different meaning people started using  router  nt ambiguity continuing use  gateway  like companion introduction internet protocol document intended help make sense internet specification specification use  gateway  routing addressing many decision need make setting ip network depend upon routing best give bit background topic return routing later section discussing gateway bridge general ip datagrams pas many network going source destination typical example address used example taken rutgers university network network network                        computer computer b gateway r gateway computer c diagram show three normal computer system two gateway three network network might ethernet token ring sort network could even single point point line connecting gateway r note computer send datagrams computer b directly using network however ca nt reach computer c directly since nt network several way connect separate network diagram assumes gateway used later section look alternative case datagrams going c must sent gateway r network gateway every computer us tcpip need appropriate information algorithm allow know datagrams must sent gateway choose appropriate gateway routing closely tied choice address note address computer begin number network attached thus   network  next notice gateway whose job connect network address network example gateway r connects network   connection network  address  connection network  address  association address network routing decision based strictly network number destination routing information computer might look like network gateway metric  none     table computer tell datagrams computer network  sent directly datagrams computer network   need sent gateway r forwarding  metric  used routing algorithm measure far away destination case metric simply indicates many gateway datagram go often referred  hop count  computer ready send datagram examines destination address get network number beginning address look routing table table entry indicates whether datagram sent directly destination gateway note gateway simply computer connected two different network prepared forward datagrams many case efficient use specialpurpose equipment designed gateway however perfectly possible use ordinary computer long one network interface software prepared forward datagrams major tcpip implementation even microcomputer designed let use computer gateway however software limitation cause trouble network note gateway several address  one network attached difference ip network protocol interface computer network address protocol computer one address applies interface gateway network   address begin  example  address refers connection network  also address begin  example  refers connection network  term  network  probably make think thing like ethernet many machine attached however also applies point point line diagram network could different city network could serial line satellite link longdistance point point connection two location point point line treated network happens two computer network point point line network number case  system connected line gateway r address network case   possible design routing software require separate network number point point line case interface gateway point point line doesnt address useful network large danger running network number however  anonymous interface  make network management somewhat difficult address network management software may way refer interface thus may able get data throughput error interface choosing addressing structure first comment make address warning start using ip network must get one official network number ip address look like  address used one computer rutgers university first part  network number allocated rutgers central authority start allocating address computer must get official network number unfortunately people set network using either randomlychosen number generic number supplied vendor may work short run bad idea long run eventually want connect network organization network even organization highly secret concerned security somewhere organization going research computer end connected nearby university university probably connected largescale national network soon one datagrams escape local network organization talking going become confused address appear datagrams probably officially allocated someone else solution simple get network number beginning cost nothing delay sometime year going faced job changing every address large network network number currently assigned ddn network information center sri international ravenswood avenue menlo park california telephone  get network number matter network used need authorization connect defense data network order get number main piece information needed apply network number address class want see discussion many way important decision make setting network assign ip address computer choice made view network likely grow otherwise find change address several hundred computer address change nearly impossible address critical ip datagrams routed basis address example address rutgers university level structure typical address   assigned rutgers university far outside world concerned  single network university send datagram whose address begin  nearest rutgers gateway however within rutgers divide address space  subnets  use next bit address indicate subnet computer belongs  belongs subnet  generally subnets correspond physical network eg separate ethernet although see exception later system inside rutgers unlike outside contain information rutgers subnet structure datagram  arrives rutgers rutgers network route departmental ethernet token ring whatever assigned subnet number  start network several addressing decision face subdivide address space use subnets class c address big address space need  subdivide address space necessary use subnets network technology allow entire campus company act single large logical ethernet internal routing necessary use technology need subdivide address space case decision make class address apply however recommend using either subnet approach method subdividing address space network section  argue internal gateway desirable network beyond simplest even need gateway may find later need use thus probably make sense assign address ethernet token ring going separate subnet allow conversion real subnets later prof necessary network maintenance purpose convenient address whose structure corresponds structure network example see stray datagram system  nice know address beginning  particular building  subnets v multiple network number suppose convinced good idea impose structure address next question structure two basic approach one subnets multiple network number internet standard specify format address address beginning common number day first two octet form network number eg   network number network number assigned particular organization next two octet could choose make next octet subnet number could use scheme entirely gateway within organization must set know subnetting scheme using however outside organization one know  one subnet  another simply know  organization unfortunately ability add additional structure address via subnets present original ip specification thus older software incapable told subnets enough software using problem may impractical use subnets organization used different approach possible organization apply several network number instead dividing single network number say  several subnets eg   could apply different network number thus might assigned range   ip software know different network number using separate network number work fine within organization two serious disadvantage first le serious waste address space  possible class b address afford waste organization unless large objection le serious would normally ask class c address purpose million possible class c address serious problem using several network number rather subnets overload routing table rest internet mentioned divide network number subnets division known within organization outside thus system outside organization need one entry table order able reach eg university entry routing table  rutgers network number use range network number instead subnets division visible entire internet used   instead subdividing  university would need entry network number routing table writing routing table many national network exceeding size current routing technology would considered extremely unfriendly organization use one network number may problem network going completely selfcontained one small piece connected outside world nevertheless tcpip expert strongly recommend use subnets rather multiple network reason considering multiple network deal software handle subnets problem year ago currently le serious long gateway handle subnets deal individual computer using  proxy arp  see one warning subnets subnets must  adjacent  ca nt configuration get subnet  subnet  going network entirely eg  example rutgers campus new brunswick newark perfectly ok network city subnets  however case line beween new brunswick newark must also part  suppose decided use regional network jvncnet talk two campus instead providing line since jvncnet  gateway serial line provide would address begin  violate rule allowable gateway line part  connecting two part  wanted use jvncnet two campus get different network number two campus rule result limitation routing technology eventually gateway software probably developed deal configuration whose network contiguous  allocate subnet network number decided use subnets multiple network number decide allocate normally fairly easy physical network eg ethernet token ring assigned separate subnet network number however option case may make sense assign several subnet number single physical network rutgers single ethernet span three building using repeater clear u computer added ethernet going split several separate ethernet order avoid change address done allocated three different subnet number ethernet one per building would handy even nt plan split ethernet help u keep track computer however make sure software computer handle network three different network number issue discussed detail section  also choose  subnet mask  used software system separate subnet rest address far always assumed first two octet network number next octet subnet number class b address standard specify first two octet network number however free choose boundary subnet number rest address common oneoctet subnet number possible choice let look class b address eg  easy see third octet used subnet number possible subnets within subnet possible address actually number like since generally bad idea use subnet number address suppose know never computer given subnet afraid might need subnets example might campus lot small building case could define bit subnet number leaving bit address within subnet choice expressed bit mask using one bit used network subnet number bit used individual address normal subnet mask choice given  chose bit subnet number bit address subnet mask would  generally possible specify subnet mask computer part configuring ip software ip protocol also allow computer send query asking subnet mask network support broadcast query least one computer gateway network know subnet mask may unnecessary set computer however capability brings whole new set possible problem one wellknown tcpip implementation would answer wrong subnet mask queried thus leading causing every computer network misconfigured thus may safest set subnet mask explicitly system  dealing multiple  virtual  subnets one network software written assumption every computer local network subnet number traffic sent machine different subnet number software generally expect find gateway handle forwarding subnet let look implication suppose subnets   ethernet consider way thing look point view computer address  problem sending machine address x subnet computer know send directly local ethernet however suppose asked send datagram  since different subnet software expect find gateway handle forwarding two subnets course nt gateway subnets   since ethernet thus find way tell software  actually ethernet common tcpip implementation deal one subnet network example berkeley unix let use slight modification command used define gateway suppose get subnet  subnet  using gateway whose address  would use command route add   say reach subnet  traffic sent via gateway  route go one gateway   referred  routing metric  use metric saying destination subnet network gateway needed example system  would use route add   actual address used place  irrelevant metric say gateway actually going used gateway address used however must legal address local network note command section simply example look documentation particular implementation see configure routing  dealing multiple subnets turning subnetting another way handle several subnets one physical network method involves intentionally misconfiguring host potentially dangerous nt watch however may easier deal lot subnets one physical network example site us bridge us subnets simply administrative convenience trick configure software host using subnets case host make distinction subnets trouble dealing problem talk subnets multisubnet network however gateway handle proxy arp solve problem approach likely convenient network carrying many subnets particularly additional one likely added later however two problem host multiple interface careful first one interface multisubnet network example suppose  network  made several ethernet connected bridge ca nt machine interface two ethernet however system one interface multisubnet network another totally separate subnet second machine multiple interface know real subnet mask need told explicitly subnets multisubnet network restriction come system multiple interface know interface use given case careful icmp subnet mask facility facility allows system broadcast query asking subnet mask host think network subnetted gateway multiinterface host think got potential confusion gateway multiinterface host happens send icmp subnet mask reply giving real subnet mask host may pick reverse possible well mean either disable icmp subnet mask reply system know real subnet mask may easy gateway know make sure host ignore icmp reply according recent document long set subnet mask explicitly host supposed ignore icmp subnet mask mechanism able set different mask different host without causing problem long set mask explicitly however noticed ip implementation change subnet mask see icmp subnet mask reply  multiple subnets implication broadcasting one subnet physical network need give thought broadcast address according latest standard two different way host subnet  send broadcast local network one use address  use address   say explicitly  host subnet    say  host local network  normally effect however several subnets one physical network subnet  ethernet also going receive message sent  however host number x listen broadcast  result two different form broadcast address somewhat different meaning mean exercise care configuring software network make sure broadcast go intend go  choosing address class apply official network number asked class network number need possible answer b c affect large address space allocated class address one octet long class b address octet class c address octet represents tradeoff lot class c address class address class c address nt allow many host idea would large network moderate number mediumsize one lot momandpop store small network table showing distinction class range first octet network rest possible address p qrs b pq r c pqr example network class network address   allows  million possible address actually network allocated address octet zero address possible network  class c network host   ie possible host general expected choose lowest class provide enough address handle growth next year organization computer many building probably need able get class b address assuming going use subnetting going use many separate network number would ask number class c address class address normally used large public network large corporate network  dialup ip micro gateway dynamically assigned address case computer permanent ip address however situation make sense allocate address dynamically common case involve dialup ip gateway intended primarily microcomputer  dialup ip possible run ip dialup line protocol called slip  serial line ip  slip useful least two different circumstance lowcost alternative permanent point point line case nt enough traffic justify dedicated line way connect individual pc network located building nt ethernet lan technology going use term  slip server  refer computer system modem attached system connect using slip system provide gateway network pc user network connect using slip number individual pc dialing slip often practical assign pc ip address one thing may enough address order keep routing straight dialup system get address subnet slip server generally address available subnet pc ca nt give one address slip server one subnet make permanent address even difficult user wanted able call server pc would need two address one subnet order avoid problem many slip implementation assign address dynamically pc first connects slip server server find unused ip address assigns pc simplest way manage give slip server range ip address keep track assign use scheme slip software include way server tell pc address use pc permanent address reverse problem pc connects server way pc tell server address care needed otherwise someone could pc claim steal file unfortunately standard way manage addressing issue slip several slip implementation handle nt single standard yet standard developed need check slip software carefully make sure assigns address way want slip server pc agree figure pc address recommend giving pc permanent address case computer able tell pc talking would case pc going receive private computer mail engage sensitive transaction recommend using dynamic address lot pc application access network security checking using slip connect two network three choice handling addressing although slip software handle three choice treat slip connection like point point line dont happen time call one computer pair computer talk separate network number use talk use routing software allows anonymous interface case address needed assign address dynamically connection opened would pc dialing make connection one two system quite reasonable use network number connection method make easy keep usage error statistic many different connection probably best use anonymous interface would probably use dynamic address allocation routing technology support anonymous interface  micro gateway perfectly possible microcomputer participate ip network however seems tendency micros use somewhat different network technology larger system many micro user start specialized network software whose design tailored specifically need micros even particular type micro micro user quite naturally want able start using tcpip without abandon special micro network already using reason growing number gateway product allow pc access microoriented network product tcpip section apple appletalk used example gateway existed time widespread use however similar product exist several micro network technology note term appletalk refers apple network protocol whereas localtalk refers specific twistedpair technology appletalk initially implemented thus appletalk analogous tcpip protocol whereas localtalk analogous ethernet medium several vendor supply gateway connect appletalk running localtalk network ip running ethernet although several product kind supply following service tcpip application pc connect tcpip system ethernet special facility defined allow ip datagrams carried localtalk pc gateway tcpip application pc written using special library us mixture appletalk tcpip appletalk facility needed get datagrams gateway transformed pure tcpip put onto ethernet thus tcpip system ethernet nt know talking micros appletalk application written larger system pc use server application written using special library le reverse one described us mixture appletalk tcpip time tcpip facility needed get datagrams gateway transformed pure appletalk put onto localtalk network communicate pc thus pc access application larger system without knowing ethernet rather apple network campus corporate ip network used connect appletalk network different location gateway location wrap appletalk datagrams inside ip datagrams send main ip network addition newer gateway translate application level example one gateway translate apple filing protocol sun network file system allows pc access unix file system pc using apple filing protocol final access unix system done using sun network file system unfortunately flexibility product like also mean complex addressing issue particularly complicated reason slip gateway often use dynamic ip address allocation range ip address assigned gateway pc attempt open first tcpip connection gateway pick free ip address assigns pc slip often need choose whether want address assigned way want pc address depends upon many pc whether application must able use ip address identify particular pc talking addressing complicated fact appletalk addressing structure must define mapping appletalk ip network number must also mapping individual ip address appletalk address mapping maintained dynamically gateway networkwide service naming going tcpip network certain thing going centrally simply administrative important central registry name ip address ddn network information center performs role internet network whole connected international internet administrator need register ddn network information center query institution host forwarded server want maintain database containing information system network minimum need host name ip address system probably central registry assign ip address network subnetted use multiple class c network number registry probably assign network number new network subnets commonly individual host administrator allowed choose host name however registry must least verify duplicate name large network may choose delegate task subregistries possibly one department suggest assign number simplest way starting thus network  would assign  first subnet  second etc ip address individual host probably start allows reserve subnet use gateway thus first host subnet  would  next  etc specific reason keeping address small possible large organization may run subnet number host number small assign another bit subnet example use entire third octet subnet number long host number le able expand bit subnet number example subnet  would split two separate subnets   assigned host number split would impossible host name need systematic start almost word made letter number hyphen safest first character letter easier user name fairly short seen software trouble dealing name longer character many time department project choose theme pick name consistent example machine used computer science graduate student rutgers named rock band steeleye band trex devo etc math department us famous mathematician gauss fermat etc institution connection outside world oneword name need connected international internet organization need get  domain name  assigned ddn network information center network number unlike network number get along without one network isolated find later need one easy add domain name recommend start official network number beginning changing network number later traumatic domain name normally end edu educational institution com company etc example rutgers university domain name rutgersedu full domainstyle host name consists oneword internal name followed organization domain name example computer normally use known internally athos full name athosrutgersedu large organization possible subdomains example might subdomain department add another period name example computer science department might decided create subdomain case computer would probably called athoscsrutgersedu get domain name assigned wise change configuration file full form name used however software set oneword version accepted nickname way user nt type long form one two system going need way keep host information date system tcpip software need able translate host name ip address user try connect another system want able refer name software translate name ip address order open connection software provides two way translation static table name server table approach probably easier small organization long connected network simply create file list name address host part host table host   aramisrutgersedu aramis sun host  gaussrutgersedu gauss sun unix host   athosrutgersedu athos sun format one line system list address name information note aramis athos two network two address primary name eg aramisrutgersedu nickname eg aramis since attached internet primary name full domain name supply brief nickname make easier user one commonlyused format host table example format  aramisrutgersedu aramis  aramisrutgersedu aramis  gaussrutgersedu gauss  athosrutgersedu gauss  athosrutgersedu gauss format line represents single ip address system two interface two line table try put address first likely used often documentation system indicate format want host information use simplest setup every computer copy host table choose use setup want set procedure make sure system get updated copy host table regularly larger site site connected internet use name server instead individual host table name server program run system keep track name program need look name instead looking copy host table sends network query name server approach two advantage large site easier keep table date name server every system site connected internet name server able talk name server organization look name elsewhere using name server way access complete host information rest internet important understand difference name server resolver name server program access host database answer query program resolver set subroutine loaded program generates query name server process response every system use resolver actually resolver generally loaded program us network since simply set subroutine need name server many people confuse two concept come believe every computer need run name server order use resolver computer need configuration file option specifies address name server query sent generally specify several name server case one system reach name server much software likely misbehave thus careful enough name server around every system always reach least one name server name server generally number configuration option rather giving advice setting name server going refer two official internet standard document available ddn network information center sri international ravenswood avenue menlo park california telephone  rfc contains instruction getting domain name network information center including necessary form rfc contains instruction set name server like document document conceptual also need documentation specific name server software going use paragraph copout future edition document contain advice setting name server however rfc almost unique directed administrator rather networking expert thus reasonable direct people moment case may need use fixed table name server tcpip implementation include resolvers host table system network connected international internet going problem system nt resolvers internet big host table list host thus put together host table list host user tend use ddn network information center maintains host table good starting point however mean complete add user favorite host system use resolver problem since name server able translate legal host name host name number allocation facility done centrally however thing may prefer centrally common one two computer handle computer mail internet easy every one computer talk directly computer internet however institution want communicate system network bitnet usenet gateway various network choosing right gateway transforming computer mail address correctly rather specialized business thus many site set appropriate software one place direct external mail external mail host internet system setting routing individual computer tcpip implementation require configuration host case done  system generation  case various startup configuration file must set system still system get configuration information across network  server  detail differ kind information need supplied implementation includes parameter describing specific machine ip address parameter describing network subnet mask routing software table drive startup various program needed handle network task machine installed network coordinator assign host name ip address described name address ready start configuring computer often put address name configuration file computer however computer particularly without permanent disk configuration information could stored get information network system start broadcast request network effect request say   computer like make sure system network ready answer question obvious issue another system tell generally done based ethernet address analogous address type network ethernet address assigned computer manufacturer guaranteed one machine entire world particular ethernet address address normally stored rom somewhere machine machine may know ip address know ethernet address thus   request includes ethernet address system set answer request table list ethernet address corresponding ip address let know answer unfortunately set table manually generally know ip address address coordinator assigned problem constructing table finding ethernet address computer generally computer designed print ethernet address console shortly turned however case may find way bring computer type command display information ethernet interface generally subnet mask specified configuration file associated computer unix system  ifconfig  command used specify internet address subnet mask however provision ip protocol computer broadcast request asking subnet mask subnet mask attribute network computer given subnet thus separate subnet table corresponding ethernetinternet address mapping table used answer address query ideally authoritative computer answer query subnet mask however many tcpip implementation set machine network belief know subnet mask answer tcpip like incorrect subnet mask setting one machine cause confusion throughout network normally startup file roughly following thing load special device driver may necessary particularly common pc network access likely depend upon addon controller card software part original operating system enable network interface ethernet interface serial line etc normally involves specifying internet address subnet mask well option described vendor documentation establish network routing information either command add fixed route starting program obtains dynamically turn domain system used looking name finding corresponding internet address  see section domain system introduction tcpip note detail depend upon domain system configured case host actually run domain name server must started host simply need configuration file specify nearest name server located set various information needed system software name system start various  daemon  program provide network service system network user system case pc often run multiple process similar facility may provided socalled  tsr  may built device driver practical document step detail since differ vendor section concentrate issue choice depend upon overall decision network operate overall network policy decision often well documented vendor detail start specific program note care necessary integrate command add routing etc startup sequence right point mysterious problem occur network routing set program need make network query program attempt look host name name server finished loading name master name server  datagrams routed system consists single ethernet similar medium need give routing much attention however complex system machine need routing table list gateway interface use every possible destination network simple example given beginning section however necessary describe way routing work bit detail system routing table look something like following example taken system running berkeley unix using command  netstat n r  column containing statistical information omitted destination gateway flag interface   uhgd il   uhgd il   uh lo   u pe   u il   u il   ug il  ug pe   ug pe default  ug pe example system connected two ethernet controller network address network il    pe   none first column show name ethernet interface second column network number ethernet third column computer internet address network last column show subnets share physical network let look routing table moment let u ignore first line majority table consists set entry describing network network three column show send datagrams destined network  g  flag present third column datagrams network must sent gateway second column show address gateway used  g  flag present computer directly connected network question datagrams network sent using controller shown third column  u  flag third column simply indicates route specified line generally route assumed unless attempt use consistently result error first line show  host route  indicated  h  flag column three routing table normally entry entire network subnets example entry   ug il indicates datagrams computer network  ie address   sent gateway  forwarding however sometimes route apply specific computer rather whole network case host route used first column show complete address  h  flag present column eg entry   uhgd il indicates datagrams specific address  sent gateway  network route  g  flag used route involve gateway   flag indicates route added dynamically based icmp redirect message gateway see detail following route special   uh lo  address  loopback device  dummy software module datagram sent  device  appears immediately input used testing loopback address also handy talking application computer bother use network talk program machine finally  default  route eg default  ug pe route used datagrams nt match entry case sent gateway address  system datagrams routed looking destination address table one described address match specific host route used otherwise match network route used route work default used default user get error message  network unreachable  following section describe several way setting routing table generally actual operation sending datagrams nt depend upon method use set route datagram sent destination looked table different routing method simply le sophisticated way setting maintaining table  fixed route simplest way set routing use fixed command startup file contain command set routing table change needed make manually using command add delete entry routing table make change nt forget update startup file also method practical relatively small network particularly dont change often computer automatically set routing entry unix add entry network directly connected example startup file might contain command ifconfig ie  netmask  ifconfig ie  netmask  specify two network interface address system automatically create routing table entry   u ie   u ie specify datagrams local subnets   sent corresponding interface addition startup file would contain command define route whatever network wanted reach example route add   route add   command specify order reach network  gateway address  used network  actually additional network number physical network connected interface  software might use different command case unix differentiates  metric  number end command metric indicates many gateway datagram go get destination route metric greater specify address first gateway path route metric indicate gateway involved  additional network number local network finally might define default route used destination listed explicitly would normally show address gateway enough information handle possible destination network one gateway attached course need single entry pointing default case need worry setting routing host gateway need attention see following section intended provide help setting network several different gateway  routing redirects tcpip expert recommend leaving routing decision gateway probably bad idea large fixed routing table computer problem something network change go around many computer update table change happen line go service may restored someone chance notice problem change routing table simplest way keep route date depend upon single gateway update routing table gateway set default unix would mean command  route add default    address gateway described system send datagrams default nt better route first strategy sound good one gateway single default entry ever use gateway case better answer gateway able send  redirects  get datagrams better route redirect specific kind message using icmp internet control message protocol contains information generally translates  future get address xxxxx please use gateway yyyyy instead  correct tcpip implementation use redirects add entry routing table suppose routing table start follows destination gateway flag interface   uh lo   u pe default  ug pe contains entry local network  default pointing gateway  suppose also gateway  best way get network  find suppose datagrams send  first datagram go default gateway since thing routing table however default gateway  notice  would really better route gateway however fairly simple method gateway determine would better using different one thus  send back redirect specifying datagrams  sent via  tcpip software add routing entry   udhg pe future datagrams  sent directly appropriate gateway strategy would complete solution nt three problem requires computer address one gateway  hardwired  startup file initial default gateway go routing table entry using may removed network us subnets tcpip implementation handle strategy work serious first problem depends upon situation small network problem modifying startup file whenever something change organization find painful network topology change gateway removed system gateway default must adjusted particularly serious people maintain network maintaining individual system one simple appoach make sure default address never change example might adopt convention address subnet default gateway subnet example subnet  default gateway would always  gateway ever removed gateway given address must always least one gateway left give nt completely cut anyway biggest problem description given far tell add route get rid happens gateway go want traffic redirected back gateway unfortunately gateway crashed going issue redirects one solution choose reliable gateway crash seldom may problem note redirects used handle kind network failure something fails distant part network current route may longer good one long gateway talking still talking simply issue redirect gateway best one however still need way detect failure one gateway talking directly best approach handling failed gateway tcpip implementation detect route failed tcp maintains various timer allow software detect connection broken happens one good approach mark route go back default gateway similar approach also used handle failure default gateway marked two gateway default software capable switching connection using one start failing unfortunately common tcpip implementation mark route change new one particular berkeley  unix however berkeley  unix vendor begin base product  rather  ability expected become common  way host find route long tcpip implementation handle failing connection properly establishing one default route configuration file likely simplest way handle routing however two routing approach worth considering special situation spying routing protocol using proxy arp  spying routing gateway generally special protocol use among note redirects used gateway redirects simply way gateway tell  dumb  host use different gateway gateway must complete picture network way compute optimal route subnet generally maintain picture exchanging information among several different routing protocol use purpose one way computer keep track gateway listen gateway message among software available purpose common routing protocol run software computer maintain complete picture network gateway software generally designed maintain computer routing table dynamically datagrams always sent proper gateway effect routing software issue equivalent unix  route add   route delete  command network topology change generally result complete routing table rather one depends upon default route assumes gateway maintain complete table sometimes gateway keep track campus network completely use default route offcampus network etc running routing software host sense  solve  routing problem however several reason normally recommended except last resort serious problem reintroduces configuration option must kept date host computer want participate protocol among gateway need configure software compatibly gateway modern gateway often configuration option complex compared individual host undesirable spread every host somewhat specialized problem applies diskless computer nature diskless computer depends upon network file server load program swapping dangerous diskless computer run software listens network broadcast routing software generally depends upon broadcast example gateway network might broadcast routing table every second problem diskless node software listen broadcast must loaded network busy computer program used second swapped paged activated must swapped paged whenever broadcast sent every computer network need activate routing software order process broadcast mean many diskless computer swapping paging time likely cause temporary overload network thus unwise diskless machine run software requires listen broadcast  proxy arp proxy arp alternative technique letting gateway make routing decision applicable broadcast network us arp similar technique mapping internet address networkspecific address ethernet address presentation assume ethernet network type acccomodated replace  ethernet address  appropriate networkspecific address arp protocol used address mapping network type many way proxy arp similar using default route redirects however us different mechanism communicate route host redirects full routing table used given moment host know gateway routing datagrams proxy arp dispense explicit routing table everything level ethernet address proxy arp used destination destination within network various combination simplest explain used address instruct host pretend every computer world attached directly local ethernet unix would done using command route add default   assumed ip address host explained metric cause everything match route sent directly local ethernet alternatively system allow get effect setting subnet mask may take precaution make sure nt reset icmp subnet mask broadcast system know real subnet mask datagram sent local ethernet destination computer need know ethernet address destination order find us something generally called arp table simply mapping internet address ethernet address typical arp table system displayed using command  arp  fokkerrutgersedu   temporary crosbyrutgersedu  c temporary caiprutgersedu  bf temporary duderutgersedu   eb cd temporary wnsmitedu   eb cd temporary oberonuscedu   ee temporary gatechedu   eb cd temporary dartagnanrutgersedu   temporary note simply list ip address corresponding ethernet address  temporary  indicates entry added dynamically using arp rather put table manually entry address arp table datagram simply put ethernet corresponding ethernet address  arp request  broadcast asking destination host identify request effect question  host internet address  please tell ethernet address  response come back added arp table future datagrams destination sent without delay mechanism originally designed use host attached directly single ethernet need talk host different ethernet assumed routing table would direct gateway gateway would course one interface ethernet computer would end looking address gateway using arp would generally useless expect arp work directly computer distant network since nt ethernet ethernet address use send datagrams send arp request nobody answer request proxy arp based concept gateway act proxy distant host suppose host network  address  computer diagram want send datagram host  different ethernet subnet  computer c diagram gateway connecting two subnets address  gateway r network network                  computer computer b gateway r computer c suppose computer sends arp request computer c c isnt able answer different network never even see arp request however gateway r act behalf effect computer asks  host internet address  please tell ethernet address  gateway say    eb cd   eb cd actually ethernet address gateway bit illusion work fine host think  attached local ethernet address  eb cd course nt work anyway whenever datagram sent  host sends specified ethernet address since address gateway r gateway get datagram forward destination note net effect exactly entry routing table saying route destination  gateway    ugh pe except instead routing done level routing table done level arp table generally better use routing table however case proxy arp make sense host implement subnets host respond properly redirects want choose specific default gateway software unable recover failed route technique first designed handle host support subnets suppose subnetted network example chosen break network  subnets   separate suppose computer understand subnets assume  single network thus difficult establish routing table entry handle configuration ca nt tell gateway explicitly using  route add    since think  single network ca nt understand trying tell send one subnet instead interpret command attempt set host route host whose address  thing would work would establish explicit host route every individual host every subnet ca nt depend upon default gateway redirects situation either suppose said  route add default   would establish gateway  default however system would nt use send datagrams subnets suppose host  want send datagram  since destination part  computer considers network nt bother look gateway proxy arp solves problem making world look way defective implementation expects look since host think subnets part network simply issue arp request expects get back ethernet address used establish direct communication gateway practicing proxy arp respond gateway ethernet address thus datagrams sent gateway everything work see specific configuration needed use proxy arp host nt understand subnets need gateway implement proxy arp order use purpose must explicitly set routing table cause arp used default tcpip implementation expect find gateway destination different network order make issue arp must explicitly install route metric example  route add default   must set subnet mask obvious proxy arp reasonable situation host nt understand subnets comment may needed situation generally tcpip implementation handle icmp redirects properly thus normally practical set default route gateway depend upon gateway issue redirects destination use different gateway however case ever run implementation obey redirects configured default gateway may able make thing work depending upon proxy arp course requires able configure host issue arp destination need read documentation carefully see exactly routing feature implementation sometimes may choose depend upon proxy arp convenience problem routing table configure simplest configuration simply establish default route even supply equivalent unix command  route add default   change address gateway modify command host point new default gateway set default route depends upon proxy arp ie metric wo nt change configuration file gateway change proxy arp gateway address given explicitly gateway respond arp request matter address order save configuration tcpip implementation default using arp route flexible implementation allow mix strategy specified route particular network default route use route route destination treat local issue arp request long gateway support proxy arp allows host reach destination without need routing table finally may choose use proxy arp provides better recovery failure choice much dependent upon implementation next section discus tradeoff detail situation several gateway attached network may wonder proxy arp allows choose best one described computer simply sends broadcast asking ethernet address destination assumed gateway would set respond broadcast one gateway requires coordination among ideally gateway complete picture network topology thus able determine best route host destination gateway coordinate among possible best gateway respond arp request practice may always possible happen fairly easy design algorithm prevent bad route example consider following situation         b      network b gateway connecting network host network want talk host network fairly easy gateway decide answer gateway b decide gateway b accepted datagram network would forward gateway delivery would mean would take datagram network send right back network easy test route involve sort circularity much harder deal situation following        b c e        suppose computer network want send datagram one network route via probably better go one intermediate network also possible go via b c e path probably slightly slower suppose computer network sends arp request destination likely b respond request b quite good route however bad case b wo nt send datagram right back onto network unable determine better alternative route without significant amount global analysis network may practical amount time available process arp request  moving new route failure principle ip routing capable handling line failure gateway crash various mechanism adjust routing table arp table keep date unfortunately many major implementation tcpip implemented mechanism net result look carefully documentation implementation consider kind failure likely choose strategy work best site basic choice finding route listed spying gateway routing protocol setting default route depending upon redirects using proxy arp method limitation dealing changing network spying gateway routing protocol theoretically cleanest solution assuming gateway use good routing technology table broadcast contain enough information maintain optimal route destination something network change line gateway go information reflected table routing software able update host routing table appropriately disadvantage entirely practical however situation robustness approach may outweight disadvantage summarize discussion disadvantage gateway using sophisticated routing protocol configuration may fairly complex thus faced setting maintaining configuration file every host gateway use proprietary routing protocol case may able find software host understands host diskless serious performance problem associated listening routing broadcast gateway may able convert internal routing protocol simpler one use host could largely bypass first two disadvantage currently known way get around third one problem default routesredirects proxy arp similar trouble dealing situation table entry longer apply real difference different table involved suppose gateway go current route using gateway may trouble depending upon routing table major mechanism adjusting route redirect work fine two situation default gateway best route default gateway direct better gateway distant line gateway fails change best route current gateway redirect gateway best case protect gateway currently sending datagrams crash since unable redirect another gateway many case also unprotected default gateway go since routing start sending default gateway situation proxy arp similar gateway coordinate properly right one respond initially something elsewhere network change gateway currently issuing issue redirect new gateway better usually possible use redirects override route established proxy arp case protected gateway currently using crash equivalent failure default gateway since gateway respond arp request big problem failure gateway using hard recover hard main mechanism changing route redirect gateway ca nt issue redirects ideally problem handled tcpip implementation using timeouts computer stop getting response cancel existing route try establish new one using default route mean tcpip implementation must able declare route based timeout redirected nondefault gateway route declared traffic return default default gateway begin handling traffic redirect different gateway handle failure default gateway possible one default one declared another used together mechanism take care failure similar mechanism used system depend upon proxy arp connection timing arp table entry us cleared cause new arp request handled gateway still simpler mechanism would simply time arp entry period since making new arp request low overhead problem removing arp entry even still good next time datagram sent new request made response normally fast enough user even notice delay unfortunately many common implementation use strategy berkeley  automatic way getting rid kind entry either routing arp invalidate route arp entry based failure gateway crash significant problem may choice run software listens routing protocol berkeley  routing entry removed tcp connection failing arp entry still removed make default route strategy attractive  proxy arp one default route may also allow recovery failure default gateway note however  handle timeout connection using tcp route used service based udp recover gateway failure  traditional  tcpip service use tcp network file system generally thus based system still may always able recover failure general examine implementation detail determine sort error recovery strategy us hope discussion section help choose best way dealing routing one strategy older implementation use strongly discouraged mention recognize see implementation detect gateway failure taking active measure see gateway best version based list gateway currently use determined routing table every minute echo request datagram sent gateway gateway stop responding echo request declared route using revert default implementation normally supply one default gateway current default stop responding alternate chosen case even necessary choose explicit default gateway software randomly choose gateway responding implementation flexible recovers well failure however large network full implementation waste lot bandwidth echo datagrams used test whether gateway reason strategy discouraged bridge gateway section deal detail technology used construct larger network focus particularly connect together multiple ethernet token ring etc day network hierarchical individual host attach localarea network ethernet token ring local network connected via combination backbone network point point link university might network look part like  net net net net net     x     x             building      x        x         x campus backbone network  serial line    x   net net one building net different building campus net somewhat distant location diagram show net connected directly switch handle connection labelled  x  building connected building campus backbone network note traffic net net take following path via direct connection network via another direct connection backbone network across backbone network building building net housed backbone network net traffic net would additionally pas serial line setup shown switch used connect backbone network net serial line thus traffic net net would need go backbone since direct connection net serial line section largely go  x   alternative design note alternative sort design shown one use point point line switched line directly host another use singlelevel network technology capable handling local longhaul networking  mesh point point line rather connecting host local network ethernet interconnecting ethernet possible connect longhaul serial line directly individual computer network consists primarily individual computer distant location might make sense would small design type computer computer computer computer        computer      computer design shown earlier task routing datagrams around network handled specialpurpose switching unit shown  x  run line directly pair host host sort routing switching well normal computing unless run line directly every pair computer system end handling traffic others example design traffic go certainly possible since tcpip implementation capable forwarding datagrams network type think host also acting gateway much discussion configuring gateway apply routing software run host sort configuration common used two reason large network one computer per location case le expensive set local network location run point point line computer specialpurpose switching unit become le expensive often make sense offload routing communication task switch rather handling host course possible network mix two kind techology case location equipment would handled hierarchical system localarea network connected switch remote location single computer would handled point point line going directly computer case routing software used remote computer would compatible used switch would need gateway two part network design decision type typically made assessment level network traffic complexity network quality routing software available host ability host handle extra network traffic  circuit switching technology another alternative hierarchical lanbackbone approach use circuit switch connected individual computer really variant point point line technique circuit switch allows system amount direct line every system technology widely used within tcpip community largely tcpip protocol assume lowest level handle isolated datagrams continuous connection needed higher network layer implement using datagrams datagramoriented technology match circuitoriented environment closely order use circuit switching technology ip software must modified able build tear virtual circuit appropriate datagram given destination virtual circuit must opened virtual circuit would closed traffic destination time major use technology ddn defense data network primary interface ddn based x network appears outside distributed x network tcpip software intended use ddn must precisely virtual circuit management described similar technique could used circuitswitching technology eg att datakit although almost software currently available support  singlelevel network case new development widearea network eliminate need hierarchical network early hierarchical network set convenient network technology ethernet lan could span distance large enough cover entire campus thus necessary use serial line connect lan various location possible find network technology whose characteristic similar ethernet single network span campus thus possible think using single large network hierarchical structure primary limitation large singlelevel network performance reliability consideration single network used entire campus easy overload hierarchical network handle larger traffic volume singlelevel network traffic pattern reasonable amount locality many application traffic within individual department tends greater traffic among department let look concrete example suppose department generates mbitsec traffic suppose futher traffic system within department department department network network need handle mbitsec backbone network connecting department also need mbitsec capacity since handling mbit department order handle situation single widearea network network would able handle simultaneous load department would mbitsec however example carefully constructed favorable hierarchical design traffic department going department backbone need higher bandwidth example suppose campus centralized resource eg mainframe large system computing center network traffic small system attempting get central system argument work case hierarchy may still useful however nt reduce bandwidth required longhaul network example department communicated primarily system computer center backbone would able carry traffic mbit per second computer center would either attach system directly backbone would  departmental  network capacity mbit per second rather mbit per second needed department second limitation singlelevel network reliability maintainability security widearea network difficult diagnose maintain localarea network problem introduced building network connected also make traffic visible location reason often sensible handle local traffic locally use widearea network traffic actually must go building however situation location one two computer may make sense set local network location singlelevel network may make sense  mixed design practice large network luxury adopting theoretically pure design unlikely large network able avoid using hierarchical design suppose set use singlelevel network even building one two computer location enough localarea network justified result mixture singlelevel network hierachical network building computer connected directly widearea network singlelevel network however one building localarea network us widearea network backbone connecting via switching unit side story even network designer strong commitment hierarchical network likely find part network simply nt make economic sense install localarea network host put directly onto backbone network tied directly serial line however think carefully making ad hoc departure design philosophy order save dollar long run network maintainability going depend upon ability make sense going network consistent technology likely able maintain network  introduction alternative switching technology section discus characteristic various technology used switch datagrams network effect trying fill detail black box assumed previous section three basic type switch generally referred repeater bridge gateway alternatively level switch based level osi model operate note however system combine feature one particularly bridge gateway important dimension switch vary isolation performance routing network management facility discussed serious difference repeater two type switch recently gateway provided different service bridge however two technology coming closer together gateway beginning adopt specialpurpose hardware characterized bridge past bridge beginning adopt sophisticated routing isolation feature network management characterized gateway past also system function bridge gateway mean moment crucial decision may decide whether use bridge gateway decide feature want switch fit overall network design  repeater repeater piece equipment connects two network use technology receives every data packet network retransmits onto network net result two network exactly set packet ethernet ieee  network actually two different kind repeater network technology may need make distinction simple repeater operates low level indeed primary purpose get around limitation cable length caused signal loss timing dispersion allows construct somewhat larger network would otherwise able construct thought simply twoway amplifier pass individual bit signal without processing packet level even pass collision collision generated one network connected repeater generates collision network limit number repeater use network basic ethernet design requires signal must able get one end network within specified amount time determines maximum allowable length putting repeater path get around limit indeed repeater add delay way repeater make thing worse thus ethernet configuration rule limit number repeater path  buffered repeater  operates level whole data packet rather passing signal bit time receives entire packet one network internal buffer retransmits onto network pas collision lowlevel feature collision repeated two network continue separate far ethernet specification concerned thus restriction number buffered repeater used indeed requirement network type however two network must sufficiently similar packet format generally mean buffered repeater used two network ieee x family assuming chosen address length maximum packet size two network related family pair buffered repeater used connect two network via serial line buffered repeater share simple repeater basic feature repeat every data packet receive one network onto thus two network end exactly set packet  bridge gateway bridge differs buffered repeater primarily fact exercizes selectivity datagrams forward network generally goal increase capacity system keeping local traffic confined network originates traffic intended network go bridge far description would also apply gateway bridge gateway differ way determine datagrams forward bridge us osi level address case ethernet ieee x network byte ethernet maclevel address term  maclevel address  general however sake concreteness example section assume ethernet used may generally replace term  ethernet address  equivalent maclevel address similar technology bridge examine datagram use ip address equivalent routing decision contrast gateway base decision ip address equivalent protocol several reason matter kind address used decision basic affect relationship switch upper layer protocol forwarding done level maclevel address bridge switch invisible protocol done ip level switch visible let give example two network connected bridge network network          bridge       computer computer b computer c note bridge ip address far computer b c concerned single ethernet network attached mean routing table must set computer network treat network local computer open connection computer b first broadcast arp request asking computer b ethernet address bridge must pas broadcast network network general bridge must pas broadcast two computer know ethernet address communication use ethernet address destination point bridge start exerting selectivity pas datagrams whose ethernet destination address machine network thus datagram b passed network datagram b c ignored order make selection bridge need know network machine modern bridge build table network connected listing ethernet address machine known network watching datagrams network datagram first appears network reasonable conclude ethernet source address corresponds machine network note bridge must look every datagram ethernet two different reason first may use source address learn machine network second must look destination address order decide whether need forward datagram network mentioned generally bridge must pas broadcast one network broadcast often used locate resource arp request typical example since bridge way knowing host going answer broadcast must pas network bridge userselectable filter possible block broadcast allow others might allow arp broadcast essential ip function confine le essential broadcast one network example might choose pas rwhod broadcast system use keep track every user logged every system might decide sufficient rwhod know system single segment network let take look two network connected gateway network network                  computer gateway computer b computer c note gateway ip address assigned interface computer routing table set forward appropriate address example computer routing entry saying use gateway  get subnet  computer know gateway gateway need scan packet ethernet computer send datagrams appropriate example suppose computer need send message computer b routing table tell use gateway  issue arp request address gateway respond arp request host would datagrams destined b sent gateway ethernet address  bridge several advantage using maclevel address bridge first every packet ethernet ieee network address address place every packet whether ip decnet protocol thus relatively fast get address packet gateway must decode entire ip header support protocol ip must software protocol mean bridge automatically support every possible protocol whereas gateway requires specific provision protocol support however also disadvantage one intrinsic design bridge bridge must look every packet network addressed thus possible overload bridge putting busy network even little traffic actually going bridge however another disadvantage based way bridge usually built possible principle design bridge disadvantage nt know plan stem fact bridge complete routing table describes entire system network simply list ethernet address lie network mean network use bridge loop loop bridge would see traffic ethernet address coming direction would unable decide table put address note parallel path destination constitute loop mean multiple path used purpose splitting load providing redundancy way getting around problem loop many bridge allow configuration redundant connection turn link loop left link fail one disabled one brought back service thus redundant link still buy extra reliability ca nt used provide extra capacity also possible build bridge make use parallel point point line one special case line go single pair bridge bridge would treat two line single virtual line use alternately roundrobin fashion process disabling redundant connection loop left called  spanning tree algorithm  name come fact tree defined pattern connection loop thus one want disable connection connection left form tree  span  includes network system order bridge network system must communicate among ieee proposal standardize protocol constructing spanning tree note tendency resulting spanning tree result high network load certain part system network near  top tree  handle traffic distant part network network us gateway would possible put extra link part network heavy traffic however extra link used set bridge  gateway gateway advantage disadvantage general gateway complex design administer bridge gateway must participate protocol designed forward example ip gateway must respond arp request ip standard also require completely process ip header decrementing time live field obeying ip option gateway designed handle complex network topology bridge different complex set decision make general bridge fairly simple decision make forward datagram interface send datagram gateway forward datagram must decide host gateway send datagram next gateway sends datagram back onto network came also issue redirect source datagram telling use better route many gateway also handle parallel path several equally good path destination gateway alternate among roundrobin fashion done bridge also though le common case issue raised roundrobin alternation tends lead datagrams arriving order different order sent complicate processing destination host older tcpip implementation bug handling order datagrams order handle decision gateway typically routing table look much like host host routing table gateway table contains entry possible network number network either entry saying network connected directly gateway entry saying traffic network forwarded gateway gateway describe  routing protocol  used build information later discussion configure gateway  comparing switching technology repeater buffered repeater bridge gateway form spectrum device near beginning list best smaller network le expensive easier set le general near end list suitable building complex network many network contain mixture switch type repeater used connect nearby network segment bridge used somewhat larger area gateway used longdistance link note document far assumed gateway used section setting host described set routing table listing gateway use get various network repeater bridge invisible ip far previous section concerned network connected considered single network section  describes configure host case several subnets carried single physical network configuration used several subnets connected repeater bridge mentioned important dimension switch vary isolation performance routing network management  isolation generally people use switch connect network normally thinking gaining connectivity providing isolation however isolation worth thinking connect two network provide isolation network problem network suddenly appear well also two network together may enough traffic overwhelm network thus well think choosing appropriate level protection isolation come two kind isolation malfunction traffic isolation order discus isolation malfunction taxonomy malfunction major class malfunction switch isolate electrical fault eg short cable sort fault distorts signal type switch confine one side switch repeater buffered repeater bridge gateway worth protecting although frequency depends upon often cable changed disturbed rare sort fault occur without disturbance cable transceiver controller problem general signal valid electrically nevertheless incorrect eg continuous infinitely long packet spurious collision never dropping carrier except simple repeater confine buffered repeater bridge gateway problem common software malfunction lead excessive traffic particular host ie broadcast bridge gateway isolate type failure fairly rare software protocol problem generate broadcast software malfunction lead excessive broadcast traffic gateway isolate generally bridge must pas broadcast bridge usersettable filtering protect broadcast malfunction however general bridge must pas arp broadcast malfunction involve arp problem severe singlevendor network software careful control however site complex network environment experimental network software may see problem sort regularly traffic isolation provided bridge gateway basic decision many computer put onto network without overloading capacity requires knowledge capacity network also host use example ethernet may support hundred system network used remote logins occasional file transfer however computer diskless use network swapping ethernet support depending upon speed io rate put computer onto network handle split several network put sort switch split correctly traffic machine piece mean putting client network server putting terminal server network host access commonly etc bridge gateway generally provide similar degree traffic isolation case traffic bound host side switch passed however see discussion routing  performance absolute performance limit becoming le issue time go since switching technology improving generally repeater handle full bandwidth network nature simple repeater must able bridge gateway often performance limitation various sort bridge two number interest packet scanning rate throughput explained bridge must look every packet network even one forward number packet per second scan way packet scanning rate throughput applies bridge gateway rate forward traffic generally depends upon datagram size normally number datagrams per second unit handle greater short datagrams long one early model bridge varied hundred datagrams per second around higher speed equipment us specialpurpose hardware speed process scanning packet firstgeneration gateway varied hundred datagrams per second however secondgeneration gateway available using specialpurpose hardware sophistication used bridge handle order datagrams per second thus moment highperformance bridge gateway switch bandwidth ethernet mean performance longer basis choosing type switch however within given type switch still specific model higher lower capacity may still difference priceperformance particularly true low end least expensive bridge currently le half price least expensive gateway unfortunately single number base performance estimate figure commonly quoted packet per second aware vendor count datagram go gateway one prominent vendor count datagrams twice thus switching rate must deflated factor also comparing number make sure datagrams size simple performance model processing time switching time datagram size time per byte time switch datagram normally constant switching time representing interrupt latency header processing routing table lookup etc plus component proportional datagram size representing time needed datagram copying one reasonable approach reporting performance give datagrams per second minimum maximum size datagrams another report limiting switching speed datagrams per second throughput byte per second ie two term equation  routing routing refers technology used decide send datagram next course repeater issue since repeater forward every packet routing strategy bridge turn two decision enabling disabling link order maintain spanning tree deciding whether forward particular packet interface bridge capable handling two interface second decision usually based table maclevel address described built scanning traffic visible interface goal forward packet whose destination side bridge algorithm requires network configuration loop redundant line le sophisticated bridge leave system designer bridge must set network loop sophisticated bridge allow arbitrary topology disable link loop remain provides extra reliability link fails alternative link turned automatically bridge work way protocol allows detect unit must disabled reenabled instant set active link form  spanning tree  require extra reliability redundant link make sure bridge use disable enable way currently official standard protocol used among bridge although standard proposal stage buy bridge one vendor make sure spanningtree protocol interoperate gateway generally allow arbitrary network topology including loop redundant link general routing algorithm gateway must maintain model entire network topology different routing technique maintain model greater lesser complexity use data varying degree sophistication gateway handle ip generally support two internet standard routing protocol rip routing information protocol egp external gateway protocol egp specialpurpose protocol use network backbone separate administration allows exchange reachability information backbone controlled way member network gateway must support egp becoming common enough probably good idea make sure gateway support egp rip protocol designed handle routing within small moderate size network line speed differ radically primary limitation used network path go gateway range may reduced use optional feature giving slow line weight larger one share traffic parallel line although implementation allow line pair gateway adapt change network load well suited situation alternative route line different speed may stable network line gateway change lot vendor supply proprietary modification rip improve operation egp increase maximum path length beyond otherwise modify much expect network involve gateway one vendor generally require support rip since routing protocol generally available expect use sophisticated protocol addition may useful gateway translate protocol rip however large complex network may choice use protocol throughout sophisticated routing protocol possible primary one considered today cisco system igrp protocol based spf shortestpath first algorithm general protocol designed larger complex network general stable wider variety condition handle arbitrary combination line type speed allow split traffic among parallel path get better overall throughput newer technology may allow network adjust take account path overloaded however moment know commercial gateway serious problem maintaining stable routing done enough variation among routing technology changing rapidly enough discus proposed network topology detail vendor considering make sure technology handle topology support special requirement sharing traffic among parallel line adjusting topology take account failure long run expect one newer routing protocol attain status standard least de facto basis however moment generally implemented routing technology rip one additional routing topic consider policybased routing general routing protocol designed find shortest fastest possible path every datagram case desired reason security cost accountability etc may wish limit certain path certain us gateway ability control spread routing information give administrative control way route used different gateway vary degree control support make sure discus requirement control prospective gateway vendor  network management network management cover wide variety topic general includes gathering statistical data status information part network taking action necessary deal failure change primitive technique network monitoring periodic  pinging  critical host pinging monitoring technique depends  echo  datagram specific type datagram request immediate reply tcpip implementation contain program usually called  ping  sends echo specified host get reply know host network connection host work nt get reply know something wrong one pinging reasonable sample host normally tell going host network suddenly stop returning ping reasonable conclude connection network gone bad one host stop returning ping host network still reasonable conclude host crashed sophisticated network monitoring requires ability get specific status statistical information various device network include various sort datagram count well count error various kind data likely detailed gateway since gateway classifies datagrams using protocol may even respond certain type datagram however bridge even buffered repeater certainly count datagrams forwarded interface error etc possible collect data central monitoring point official tcpip approach network monitoring first stage use related set protocol sgmp snmp protocol designed allow collect information make change configuration parameter gateway entity network run corresponding interface program host network sgmp available several commercial gateway well unix system acting gateway limited set information sgmp implementation required supply well uniform mechanism vendor add information late second generation protocol snmp service slightly sophisticated protocol complete set information monitored called mib management information base unlike somewhat ad hoc collection sgmp variable mib result numerous committee deliberation involving number vendor user eventually expected tcpip equivalent cmis iso network monitoring service however cmis protocol cmip yet official iso standard still experimental stage general term protocol accomplish thing allow collect critical information uniform way vendor equipment send command udp datagrams network management program running host network generally interaction fairly simple single pair datagrams exchanged command response moment security fairly simple possible require amount password command sgmp referred  session name  rather password elaborate encryptionbased security developed probably want configure network management tool disposal several different thing shortterm network monitoring want keep track switch crashing taken maintenance failure communication line hardware possible configurate sgmp snmp issue  trap  unsolicited message specified host list host critical event occur eg line however unrealistic expect switch notify crash also possible trap message lost due network failure overload thus ca nt depend completely trap also poll switch regularly gather information various display available including map network item change color status change running  strip chart  show datagram rate item selected switch software still early stage expect see lot change however least expect notified way failure may also want able take action reconfigure system response failure although security issue make manager nervous existing management protocol second type monitoring likely want collect information use periodic report network utilization performance need sample switch perodically retrieve number interest rutgers sample hourly get number datagrams forwarded ip decnet count reloads various error count reported daily detail monthly summary produced giving traffic gateway key error rate chosen indicate gateway overloaded datagrams dropped input output possible use monitoring technique kind type switch moment simple repeater report statistic since generally processor would cause major increase cost however possible put network management software buffered repeater bridge gateway gateway likely contain sophisticated network management software gateway vendor handle ip expected implement monitoring protocol described many bridge vendor make provision collecting performance data since bridge protocolspecific software necessary implement tcpipbased network management protocol case monitoring done typing command directlyattached console seen one case necessary take bridge service gather data case possible gather data via network monitoring protocol ad hoc even proprietary except small network probably insist switch complex simple repeater collect statistic provide way querying remotely portion network support operation monitored pinging however ping simply detects gross failure allow look noise level serial line quantity needed highquality maintenance long run expect software available standard protocol sgmpsnmp cmis however proprietary monitoring tool may sufficient long work equipment  final evaluation summary place kind switch technology normally used repeater normally confined single building since provide traffic isolation must make sure entire set network connected repeater carry traffic computer since generally provide network monitoring tool want use repeater link likely fail bridge gateway placed sufficiently frequently break network piece traffic volume manageable may want place bridge gateway even place traffic level alone would require network monitoring reason bridge must pas broadcast datagrams limit size network construct using probably good idea limit network connected bridge hundred system number increased somewhat bridge good facility filtering certain kind network misbehavior passed bridge used among portion network single group responsible diagnosing problem crazy use bridge network owned different organization portion network experiment done network technology always isolated rest network gateway many application important choose product right combination performance network management tool feature make decision bridge gateway configuring gateway section deal configuration issue specific gateway gateway handle ip internet host thus discussion configuring address routing information apply gateway well host exact way configure gateway depend upon vendor case edit file stored disk gateway however reliability reason gateway disk configuration information stored nonvolatile memory configuration file uploaded one host network minimum configuration involves specifying ip address address mask interface enabling appropriate routing protocol however generally option desirable often parameter addition ip address set interface one important parameter broadcast address explained older software may react badly broadcast sent using new standard broadcast address reason vendor allow choose broadcast address used interface set using knowledge computer network general computer follow current standard broadcast address  used however older implementation may behave better address particularly address us zero host number network  would  compatibility software implement subnets would use  broadcast address even subnet  watch network network monitor see result several different broadcast address choice make bad choice every time gateway sends routing update broadcast many machine network respond arp icmp error note change broadcast address gateway may need change individual computer well generally idea change address system configure give behavior compatible system ca nt configure interface parameter may necessary deal peculiarity network connected example many gateway test ethernet interface make sure cable connected transceiver working correctly test work properly older ethernet version transceivers using transceiver would disable keepalive testing similarly gateway connected serial line normally regular testing make sure line still working situation need disabled often enable feature software want use example often necessary turn network management protocol explicitly give name address host running software accept trap error message gateway option relate security minimum may include setting password making change remotely  session name  sgmp need control access certain part network also need define access control list whatever mechanism gateway us gateway load configuration information network present special issue gateway boot sends broadcast request various kind attempting find internet address load configuration information thus necessary make sure computer prepared respond request case dedicated micro running special software case generic software available run variety machine consult vendor make sure arranged reliability reason make sure one host information program gateway need case maintain several different file example gateway used rutgers use program called  bootp  supply internet address load code configuration information using tftp mean maintain file bootp contains ethernet internet address gateway set file containing configuration information gateway network large worth taking trouble make sure information remains consistent keep master copy configuration information single computer distribute system change using unix utility make rdist gateway option store configuration information nonvolatile memory eliminate logistical headache however present problem content nonvolatile memory backed central location also harder network management personnel review configuration information distributed among gateway starting gateway particularly challenging load configuration information distant portion network gateway expect take configuration information network generally issue broadcast request network connected computer one network prepared respond request thing straightforward however gateway may remote location nearby computer system support necessary protocol case necessary arrange request routed back network appropriate computer requires strictly speaking violation basic design philosophy gateway generally gateway allow broadcast one network pas adjacent network order allow gateway get information computer different network least one gateway configured pas particular class broadcast used retrieve information sort configuration test loading process regularly unusual find gateway come power failure someone changed configuration another gateway made impossible load necessary information  configuring routing gateway final topic considered configuring routing complex gateway normal host tcpip expert recommend routing left gateway thus host may simply default route point nearest gateway course gateway ca nt get need complete routing table order understand configure gateway look bit detail gateway communicate route first turn gateway network know one directly connected specified configuration information order find get distant part network engages sort  routing protocol  routing protocol simply protocol allows gateway advertise network get spread information one gateway next eventually every gateway know get every network different style routing protocol one common type gateway talk nearby gateway another type every gateway build database describing every gateway system however protocol way gateway system find get every destination metric number set number used compare route routing table constructed gathering information gateway two gateway claim able get destination must way deciding one use metric used make decision metric indicate general sense  cost  route may cost dollar sending datagrams route delay millisecond measure simplest metric count number gateway along path referred  hop count  generally metric information set gateway configuration file derived information appearing minimum routing configuration likely consist command enable routing protocol want use vendor prefered routing protocol unless reason choose another use normal reason choosing another protocol compatibility kind gateway example network may connected national backbone network requires use egp exterior gateway protocol communicate route egp appropriate specific case use egp within network may need use addition regular routing protocol communicate national network network several different type gateway may need pick routing protocol support moment likely rip routing information protocol depending upon complexity network could use rip throughout use sophisticated protocol among gateway support use rip boundary gateway different vendor assuming chosen routing protocol turned additional decision may need make one basic configuration option supplying metric information indicated metric number used decide route best unsophisticated routing protocol eg rip normally count hop route pass gateway would considered better one pass course latter route used mbps line former bps line would wrong decision thus routing protocol allow set parameter take sort thing account rip would arrange treat bps line several hop would increase effective hop count better route chosen sophisticated protocol may take bit rate line account automatically however lookout configuration parameter need set generally parameter associated particular interface example rip would set metric value interface connected bps line protocol based bit rate might need specify speed line gateway figure automatically routing protocol designed let gateway learn topology entire network choose best possible route datagram case may want use  best  route may want traffic stay certain portion network security cost reason one way institute control specifying routing option option likely different different vendor basic strategy rest network nt know route wo nt used control normally take form limiting spread information route whose use want control note way user override routing decision made gateway really need control access certain network two separate thing use routing control make sure gateway use route want use access control list gateway adjacent sensitive network two mechanism act different level routing control affect happens datagrams user specified routing manually routing mechanism must set choose acceptable route access control list provides additional limitation prevents user supplying routing bypassing control reliability security reason may also control allow list gateway accept information may also possible rank gateway priority example might decide listen route within organization route organization part organization would effect traffic use internal route preference external one even external one appear better use several different routing protocol probably decision make regarding much information pas among since multiple routing protocol often associated multiple organization must sure make decision consultation management relevant network decision make may consequence network immediately obvious might think would best configure gateway everything know passed routing protocol however reason may want metric used different routing protocol may comparable connected two different external network want specify one always used preference nearest one used rather attempting compare metric information received two network see better route egp particularly sensitive egp protocol handle loop thus strict rule governing information may communicated backbone us egp situation egp used management backbone network help configure routing slow line network bps slower may prefer send complete routing table throughout network connected external network may prefer treat default route rather inject routing information routing protocol 