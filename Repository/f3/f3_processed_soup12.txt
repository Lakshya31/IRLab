simple offline usenet packet format soup version  copyright c  rhys weatherley rhys csuqozau last update august distribution permission use copy distribute material purpose without fee hereby granted provided copyright notice permission notice appear copy name rhys weatherley used advertising publicity pertaining material without specific prior written permission rhys weatherley make representation accuracy suitability material purpose provided   without express implied warranty note document public domain copyrighted however free distribution document unlimited create product us packet format suggested include unmodified copy document inform user packet format query format request latest version directed rhys weatherley email address introduction many year fidonet community using qwk format enable user download mail conference read offline save phone charge prevents tying bb line long period time also allows user use much powerful tool machine process downloaded  packet  made available online environment date however little work done usenet dialin unix community facilitate user operation attempt made use qwk due qwk limitation unsuitability usenet message format effort successful within usenet tendency seems either  dialin machine put   set usenet site  former keep user mercy whatever user interface admin machine see fit install latter requires far computing knowledge average computer user expected serve lock large portion computerliterate public experiencing usenet latter option also give rise security problem form forged usenet message controlled dialin system avoids purpose document define new packet format aware convention used usenet community forming middle ground dialin user interface full usenet connectivity limited downloading usenet news however format could used enable unix user package unix mailbox download later perusal format extensible kind news conference system feasible although yet defined qwk fidonet message could accomodated within packet usenet message revision history  add command error file renamed  simple offline usenet packet format  extra field type code area list file message area summary  add description list file everything else identical   original version document previously document known  helldiver packet format  hdpf variant hdpf called  simple local news packet format  slnp created philippe goujard ppg oasisiclcouk document combine feature previous format name changed make le productoriented terminology packet set file collected compressed archive message packet primary kind packet contains message user read reply packet special kind packet contains reply composed user usually response message message packet packet generator program generates packet downloaded read process uploaded reply packet packet reader program read packet usually presenting message packet user generates reply packet packet processor either packet generator packet reader generating host computer packet generator executes reading host computer packet reader executes download transfer packet generating host reading host transfer may take place fashion although common method use file transfer protocol zmodem kermit upload transfer packet reading host generating host packet stream logical link generating reading host downloads uploads packet take place message area collection message related common topic purpose example message area include usenet newsgroups unix mailbox fidonet conference reply message area special kind message area contains reply uploaded generating host text file ascii file consisting line terminated linefeed character lf decimal operating system terminate line text file crlf pair file must converted lfterminated line transmission packet anatomy packet packet group file collected compressed archive standard compression technique defined document zip technique arj zoo arc lzh etc also used also possible unix tarz format used transmit packet minimum requirement method collect group file single packet method expand packet back original file zip specified provide common compression format packet processor filename packet stored upper case system case matter eg unix following file specification may appear packet info optional textual information list list message area generating host area index message area within packet reply index reply message area reading host msg text message particular message area idx index information message message area command extra command sent along packet error error occurred execution command filename may also appear packet defined specification avoided generating software ignored receiving software info file optional text file may contain kind textual information generating system typically file would present kind urgent message must sent receiving user use file store name generating host static information possible discouraged save space transmission time information required command file used transfer list file optional text file contains list message area available generating host together format message specified section  list file  area file text file contains index message area present within packet specifying name message area filename message may found message format specified next section reply file text file contains index message area present within packet contain reply user mailed posted generating host case packet contain either area file reply file may present see section  reply file  information msg file contain text message single message area actual format file depends type message area specified area file see section  message file  information idx file provide index msg file usually specifying message start content common message header field file intended use reading software recipient system quickly display overview message present message area see section  index file  information command file text file contains command executed reading generating host change behaviour host end packet stream error file contains textual error message report human host packet destined two file explained section  sending command system  area file area file text file containing zero line specifies single message area encoding name messageindex file pair message appear particular line following form prefix tab area name tab encoding tab description tab number  prefix  specifies name messageindex file pair  area name  name message area  encoding  specifies format message index file type message area  description  descriptive name message area  number  number message message file last two field optional additional field may added future version specification message index file corresponding message area name  prefixmsg   prefixidx  respectively  prefix  contains alphabetic character must upper case message area name may sequence printable ascii character space tilde usenet typically dotted name like  complangc  network may include space unusual character area name receiving software must aware fact act accordingly also receiving software must deal gracefully character high bit set name contain control character since people country speak language english may wish use country native encoding message area name hard rule name may contain tab cr lf receiving software treat name indivisible string displayed user encoding field consists two three ascii character usually alphabetic first specifies format message file second specifies format index file optional third specifies kind area private public following message file format currently defined case significant u usenet news article unix mailbox article mailbox article mmdf format b binary bit clean mail format b binary bit clean news format index file individual message file encoding explained next section format indicates message file present index file used summary message message area explained section  message area summary  following index file format currently defined case significant n index file c cnews overview database format c shorter cnews overview database format offsetlength pair delineating message type explained section  index file  see section  minimal conformance  information minimal number message index format supported packet generator packet reader following kind message area currently defined case significant message area contains private mail n message area contains public message news u message area kind unknown default third letter optional present unknown kind area depends message file type message type b default kind message type u b default kind n recommended value u third letter used although future version specification may add additional letter necessitating u placed third letter kind unknown message area kind solely determined message file type recommended third letter omitted save space transmission time type may defined future version specification packet processor recognise message file type ignore corresponding message index file packet processor recognise index file type either ignore message file attempt break message file separate message mean packet processor recognise message area kind kind treated unknown user warned message area ignored optional message area description area file consists sequence printable ascii character may used insert  readable  name message area may contain tab cr lf message area may appear area file time different prefix discouraged could used split large message area across one message file conveniently handled generating separate packet containing area contination following example demonstrate capability area file email mn complangc uc c programming language discussion newsfuture bc future usenet email usrspoolmailfred unm private email fred u compbbsmisc mcn u compbbswaffle ui message file format message file depends message file format specified area file version specification defines three format common use usenet unix community two additional binary format permit message stored modification assumption line length byte value format line terminated lf character cr character message considered data character ignored receipt particular msdos system strip cr character text message writing packet u usenet message file text file consisting one message prefixed rnews header header form  rnews n   n  number byte message follows header excluding linefeed character terminates header number header followed white space character character ignored terminating lf character encountered note rnews header although terser separator could used rnews header following advantage message extracted absense index file index file unknown type b message file imported usenet system standard rnews batch thus user wish set real usenet site simply use dedicated usenet software read packet use existing packet provider convenient readonly newsfeed extra burden placed system administrator generating system unix mailbox message file text file consisting one message first line message must start character sequence   remaining line message start   character prepended thus   line delimit message file separate message mmdf mailbox message file sequence one message separated least controla character message file may optionally start end sequence character sequence controla character occurs message  adjusted  insertion space split sequence use controla character within message discouraged format chosen mail common occurrence unix community generating system may elect instead convert mailbox usenet format wish set area kind inform packet reader message area contains private email rather news b binary mail b binary news format identical content message must conform rfc may contain content information compatible rfc mime difference message format preceding format assumption made line length value byte may used position message preceded byte value indicates length message byte stored bigendian order ie high byte first low byte last difference b b semantic one message file type b expected contain mail message message file type b expected contain news message thus reader software make distinction two desire practical purpose u sufficient binary b b type used article contain bit binary data possible use type u binary data well message content may modified mime becomes widespread expected binary message containing program sound picture video become popular necessitating binary type note mime message stored u message file binary component encoded quotedprintable base expected common usage mime near future required b b used mime message containing raw unencoded binary data indicated contenttransferencoding header value  binary  index file specification defines four index file type provide varying degree support packet reader type n indicates index file present packet reader extract message message file useful generating system providing usenet newsfeed using packet receiving system interested index information type c index file text file lf terminated line one line per message occurs message file line index file order corresponding message line following form offset tab subject tab author tab date tab mesgid tab ref tab byte tab line tab selector note linewrapping documentformating purpose linewrapping occurs index file field following semantics offset seek position message file corresponding message start first seek position u format indicates start line following rnews header line format indicates start   line format indicates start article controla sequence b b format indicates first byte message byte message length subject  subject  line message author   line message date  date  line message mesgid  messageid  line message ref  reference  line message byte number byte message field zero indicates corresponding message message file used summary see section  message area summary  detail line  line  line message note field pretty useless day usenet still popular meant indicate number line body message generating software may elect regenerate value present original message required selector string used summary request message sent future packet see section  message area summary  detail string usually number value messageid could used packet reader treat string indivisible string sent  sendme  command command file zerolength string indicates selector string field contained tab newlines white space original article converted single space field must present may empty  byte  field must empty since provides necessary information packet reader field must conform internet rfc document rfc rfc optionally header line may end one extra tabseparated field rfccompliant header field together header field name eg  supersedes foovax  field defined version specification arrangement generating host reading host format compatible news overview nov database format cnews difference substitution offset article number used cnews addition  selector  field cnews format designed assist threading newsreader packet format provide similar assistance threading packet reader c format similar c except  mesgid   ref  field dropped field commonly quite long mainly use packet reader perform messageid based message threading packet reader perform subject threading ie sort subject line date andor arrival order require information format header line case follows offset tab subject tab author tab date tab byte tab line tab selector tabseparated field may added future version specification  author  field slightly different c format instead rfc format address author name extracted   line message rfc rfc   line one following form address address name name address name may sometimes surrounded doublequote character embedded    sequence contain  useless  information comma   slash   main requirement generating software produce kind le meaningful string name author displayed user packet reader see rfc rfc information syntax   line message index format purely binary using byte message corresponding message file first byte specify offset message file message remaining byte specify number byte message byte quantity stored bigendian order high byte first format supplied provide tradeoff transmission time easy extraction message message file reply file one requirement offline reading system mechanism user upload reply new message generating system mailing posting possible reuse area file purpose keeping download upload section separate help prevent message fed back network erroneously reply file similar format area file line following form prefix tab reply kind tab encoding  prefix   encoding  field  reply kind  field indicates mechanism use transmitting message message file following value currently defined mail transmit rfc compliant personal mail message news transmit rfc compliant usenet news posting unix system transmission mail news usually performed  sendmail   inews  program respectively additional kind may specified future version specification message format note discouraged kind  mail   news  used anything rfccompliant message particular fidonet qwk message use different reply kind message reply kind placed message file separate message file tabseparated field may added line reply file future version specification recommended message file type b b used sending reply minimise chance message corruption recommended index file type reply n index type c c discouraged provide useful information reply purpose format message message file follow relevant rfc standard following restriction    sender   control   approved  similar  dangerous  header line ignored system transmitting reply prevent forgery occuring particular   header determined user login name similar mean rather data supplied user message case mail message contain    subject   cc   bcc   replyto  header line news message contain  newsgroups   subject   followupto   keywords   summary   replyto  header line optional header especially mime content header may also present automatic addition signature generating host receives reply packet discouraged signature added user packet reading software instead desired method allowing reply one person stored packet considered rejected security reason following example demonstrates capability reply file r mail bn r mail bi r news bn r news bi list file list file may used send list available message area receiving system format similar area file prefix field deleted line following form area name tab encoding tab description  area name  name message area  encoding  letter message index area kind subscription code  description  optional message area description optional field may added future version specification message index area kind code area file subscription code one following value user subscribed message area n user subscribed message area field present default n note message area list file subscribed unsubscribed using request command file private email message area normally appear list following example demonstrates capability list file altflame ucnn compbbsmisc ucny compbbswaffle ucny complangc ucnn c programming language discussion newsfuture ucny future usenet sending command system command error file contain information changing behaviour end packet stream reporting error execution command generation packet text file lfterminated line error file simplest consists error message program generated packet report progress previously executed command format error message defined human readable packet reader may present error user perusal command file consists sequence command one per line modify behaviour packet processor end packet stream usually command sent packet reader packet generator change subscribed message area send file etc name command case significant sent lower case command understood program ignored version nm command specifies version specification packet conforms document version    date dd mmm ccyy hh mm s zone date time packet created prevent confusion different country date format date must always appear  dd mmm ccyy  example  jul  date format converted local convention desired  hh mm s  hour clock time value  zone  field number hour minute timezone offset greenwich mean time  hhmm   hhmm  example u eastern standard time est    australian eastern standard time    zone omitted default  local time  however zone omitted way determine subscribe name command request packet generating program subscribe new message area area name may contain space tab additional field may added future version specification separating tab ignore anything tab command may generate error message message area exist subscribed unsubscribe name command request packet generating program unsubscribe message area remark tab error also apply command catchup name command request packet generating program catchup nominated message area mark message area read continue batching next message received area name present packet generating program catchup message area list alwaysnever command request packet generating program send full list available message area list file next packet argument  always  present list file sent every packet argument value  never  revers minimal compliance  list always  treated  list   list never  ignored hostname string command specifies name host bb packet generated serf informational role string sequence printable ascii character software string command specifies name version software generated packet server informational role string sequence printable ascii character sendme tab area tab selector tab selector  command request packet generator send number message nominated message area  selector  argument taken  selector  field c c index file multiple  sendme  command message area may present command file maximum length command character note command use space separate argument command us tab mail mail n command change whether private email sent generated packet deletemail deletemail n command change whether user private mailbox deleted batched packet mailindex x set preferred mail index format x one value n c c newsindex x set preferred news index format x one value n c c get filename putname request file generating side placed packet sent packet reader  putname  specifies  filename  argument corresponding  put  command  putname  specified default use base name  filename  directory path specified separator must  noted security could breached use command program support command careful preferably restricting request particular directory tree put pktname filename command usually sent response  get  command although sent  pktname  specifies name file packet contains requested file content  filename  argument specifies destination file write content note security could breached command destination filename checked restricted particular directory tree also recommended user prompted confirmation writing file directory path specified  filename  separator must  recommended extension  fil  used file packet contain data sent command example  put fil abczip  supported cmd  command usually sent packet generator inform packet reader command supported generating program argument spaceseparated list command name example  supported subscribe unsubscribe list   supported subscribe unsubscribe catchup list mail deletemail  recommended least  subscribe   unsubscribe   list  argument supported packet generator recommended add  supported  line packet generated inform packet reader command used absence  supported  line  subscribe   unsubscribe   list  assumed supported one command received item eg  subscribe   unsubscribe   list   mail   last command command file take precedence previous command following example demonstrates typical command file sent packet generator version  date jul   hostname frobozzdomaincom software fubar  supported subscribe unsubscribe catchup list sendme get put fil abczip put fil deftxt following example demonstrates typical command file sent packet reader subscribe complangc subscribe complangmisc unsubscribe altswedishchefborkborkbork list get xyzzyzip get usrlocallibfubartxt frobozztxt message area summary preceding section described number feature supporting message area summary section provides greater detail since message area notably usenet newsgroups get quite large user may want download summary message area instead message request message interest sent later time reading usually summary list message subject author similar  header information  optionally user may request first line message also sent user may peruse beginning message decide whether retrieve rest message activity supported following fashion packet format summary information sent index file type c c usually accompanying message file therefore message file format area file set line index file  byte  field set indicate message present message file  selector  field set string used request message way  sendme  command usually selection string message number message generating host value messageid allowable first line message also desired message file format set something  offset   byte  field index file may used extract trimmeddown message perusal  selector  field used request entire message sent later time way  sendme  command possible create message area contains ordinary message summary message  selector  field present zerolength message processed usual way  selector  field present zerolength summary message  byte  field used determine first line message exist message file mixture useful situation user wish download message le certain length download larger message summary larger message explicitly requested user really want minimal conformance section describes minimal amount work packet processor must compliant specification packet generator able generate message area b u message format private public message area respectively process reply b b message format minimal conformance index format n must supported message area summary required one index format c c supported recommended either c c supported packet generator even message summary required message summary supported minimal requirement send index file message file format set packet generator support  subscribe   unsubscribe   list  command also  sendme  command message area summary required packet reader able read message index format generate reply b b message format message area summary supported area message format flagged user understood packet reader also able display info list file present packet able prompt user  subscribe   unsubscribe  request sent packet generator future enhancement obvious enhancement made support message format especially fidonet format currently message area file code q reserved qwkformat message defined future version specification demand warrant experimentation format auxillary file encouraged please contact author first prevent doubleups occurring author may contacted via email rhys csuqozau 