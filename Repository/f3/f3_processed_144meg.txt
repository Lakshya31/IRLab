pegram uvmgenuucp robert b pegram newsgroups compsysataristtech subject upgrade st floppy meg   drive date jul  gmt sender nobody uvmgenuucp organization emba computer facility univ vermont burlington tried post yesterday gnuemacs go hartmut semken aka hase  meg upgrade atari sts megas compilation several posting edited bob pegram comment indicated text rbpiii yet upgrade lazy  seems workable tt rumor hd floppy would seem atari thing new yet fully available floppy controller western digital rated handle higher clock input necessary thus future upgrade may become reliable simple chip replacement enjoy bob pegram originally hase haseuucp hartmut semken original subject floppy drive  meg woe original date feb  gmt reference aa jadeberkeleyedu ultbiscritedu organization hase berlin west germany clf ultbiscritedu cl freemesser writes replyto hase netmbxuucp hartmut semken organization netmbx public access unix berlin west germany line posted sat nov  problem hooking  meg teac wondering know ca nt use hd st controller chip ca nt handle glad work k mode well hack hardware go trick double clock frequency controller chip talk twice fast drive bit stream  highdensity  format clock mhz well beyond specification wd rated run mhz work time hack consists two part hardware software work  inch rbpiii high density drive reason drive must autosense hd disk inserted change rpm accordingly  meg drive neither hd   floppy notably one true blue p rbpiii hardware clock pin wd pin normally hooked mhz clock cut pin connect output simple circuit feed two input simple circuit mhz mhz clock mhz gotten shifter pin  simple circuit  mentioned could simple manual switch able select two clock frequency therfore two  mode  controller chip double density high density simple circuit could also multiplexer l think controlled  detected hddisk  output floppy drive teac fd hfn provides outout pin jumper set hfn second jumper enables internal detection hd disk must set mux disk inserted select appropriate mode operation automatically worry two drive different mode copying one drive clock rate switched twice second trouble controller remember clock range megahertz  want connect one hd drive one dd drive need two ttl gate one l make sure controller dd mode dd drive invert hddetectedoutput low dd high dd behind inverter feed nand gate together drive select dd drive let high output nand gate select ddclock mhz  nothddetected dddriveselect  select dd mode right two hd drive problem except high density floppy boot problem discussed set step rate boot sector rbpiii software controller us clock base timing pulse width time pulse step line controller controlled  wd rbpiii make short doubled clock controller try make head step twice fast send step pulse every  millisecond set millisecond tos standard set step rate millisecond make controller step millisecond hd mode well millisecond step dd mode slow floppy operation bit much stepping reading writing take time set step rate well documented tos variable step rate x called seekrate step rate variable used bios call routine pointed  hdvinit  hdvinit routine seems initialize bios parameter block floppy pointer hdvinit found xa supported tos variable look mwcassembler source information step rate another posting curly brace rbpiii article uvmgenuucp pegram uvmgenuucp pegram r writes rat looked possible seek rate last night msec slow go hmm tos step  msec rate code  setting controller msec doubling clock work almost  inch hd drive wanted know could still use k  drive need true msec step rate wd clock switching mhz contemplated work fast forget switch use properly buffered manual switch rare occasion necessary  properly buffered  ask see usual design eliminate switch bounce radio shack pamphlet digital electronics circuit needed l mentioned work nicely debouncer  glue  still want multiplexer send debounced mhz    true  mhz inverted  false    output manual switch select clock design top head need improved please post better one come one think one chip l solution clock skew wd unimportant degree phase  reason mention believe problem mentioned beginning original posting due either incorrect jumper setting drive noise problem st clock going st switch good idea nt worry driving capacitance free standing wire think effect new high frequency antenna inside st rbpiii would also hard boot floppy mod double mhz clock formatter   msec seek rate seek rate setting boot sector every boot floppy would idea even work sure work since step schould necessary read boot sector boot harddisk  utility dc formatter least format disk boot sector reset step rate boot game disk could similarly hacked work new drive rbpiii hdfloppy work modifying st step pulse width probable cause case use edgetriggered monoflop  resize  pulse  hase mean monostable  oneshot  available ttl   timer chip rbpiii second thing get formatter format sector per track hyperformat claus brodt thing simple formatter hacked example mark williams c lexicon included help try write hase hasembxsuborg probably bounce mail service fading fast  check hase current address show csas rbpiii try reply anything finally get hase    cut seek      module name seek shri globl main main clrl sp movew x sp trap addql moveld savessp movew x m leaxa movel moveald jsr movelsavessp sp movew x sp trap addql even savessp blkl seek rate code   millisecond set seek rate millisecond drive tos version tested rainbow tos  blitter tos  tos        cut formathc        formathc formatter fuer high density disketten   nur fuer angepasste hardware floppycontroller und laufwerk   muessen highdensity tauglich sein   hartmut semken lupsteiner weg berlin   hase hasembxsuborg hase netmbxmbxsuborg   sep  include stdioh include osbindh include timeh define sleeptime  zeitschleife taste  define blank xee define magic xl define bufsize   platz fuer mehr al sektoren   define device  floppy floppy b define side  je  define sector  nach define track belieben define totsec track side sector extern int errno main int track int side int status short bf register char reply short middle char buffer printf  en  printf  public domain high density mini formattern  printf  von h semkennder autor garantiert keiner weise fr die funktionndi es programmesnbenutzung auf eigene gefahrn  printf  nnn  printf  pformatiere diskette drive cqn seitenn sektoren p ro spurn spurennn  device side sector track printf  wirklich formatieren  fflush stdout reply crawcin reply reply j reply j printf  nein floppy nicht formatiertn  sleep pterm printf  jan  printf  diskette einlegen taste drcken   fflush stdout crawcin printf  n  bf malloc bufsize track track track track  side side side side printf  formatiere spur seite  track side fflush stdout status flopfmt bf l device sector track side magic blank status middle bf printf  dn  status middle printf  tdefekter sektor dn  middle else printf  tokayr  printf  nnalle spuren formatiertn  printf  initialisiere directoryn  track track bufsize bf track track track track side side side side status flopwr bf l device track side sector errno status perror  write error  protobt buffer long random   prototyp bootsector fr sektoren   prototyp bootsektor fr da neue format anpassen   byte und enthalten die sektoren pro disk   unteres byte von totsec  buffer char totsec totsec  oberes byte von totsec e lebe da intel intformat  buffer char totsec buffer char sector  sektoren pro spur  status flopwr buffer l device status errno status perror  write error bootsector  status flopver buffer l device status errno status perror  verify error bootsector  printf  diskette laufwerk c formatiertn  device sleep pterm sleep second int second sleeptime clockt clock clock clktckseconds else printf  taste drueckenn  fflush stdout crawcin endif  original idea post hartmut semken lupsteiner weg berlin hase haseuucp dennis stepped top seat whet founder died lethal overdose brick wall taken influence ferrari bottle tequila douglas adam long dark teatime  addition bob pegram internet pegram griffinuvmedu uucp figure physical mail r pegram rr box green st vergennes vt usa home tel na add appropriate code elsewhere 